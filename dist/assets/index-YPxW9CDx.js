import{ab as Oe,a5 as n,t as h,ad as re,bl as $,v as Me,k as e,S as X,N as I,a6 as ne,V as L,K as ke,L as J,M as fe,R as g,U as a,a7 as N}from"./index-DTYN3TOH.js";import{D as l}from"./DeNumberInput-BS07c6SS.js";import{D as De}from"./DataTable-MTBnhMEz.js";import{u as Ce,C as H}from"./workspace-DfgJwqS9.js";import{S as D}from"./index-C5jO90yL.js";import{C as xe}from"./index-C8xQ4yrc.js";import"./index-DBQM2_X8.js";import"./DownOutlined-C6NvF-xp.js";import"./Dropdown-BicCSbDJ.js";import"./useBubbleLock-C5yNDbdi.js";const{Paragraph:ye,Text:pe,Title:R}=ke,Fe=["EUR","USD","CNY"],Ie=[{value:"START",label:"Start (1. Tag)"},{value:"MID",label:"Mitte (15. Tag)"},{value:"END",label:"Ende (letzter Tag)"}],K=[{value:"ORDER_DATE",label:"ORDER_DATE"},{value:"PRODUCTION_END",label:"PRODUCTION_END"},{value:"ETD",label:"ETD"},{value:"ETA",label:"ETA"},{value:"DELIVERY",label:"DELIVERY"}],_=[{value:"ORDER_DATE",label:"ORDER_DATE"},{value:"PROD_DONE",label:"PROD_DONE"},{value:"ETD",label:"ETD"},{value:"ETA",label:"ETA"}],Le=[{value:6,label:"6 Monate"},{value:12,label:"12 Monate"},{value:18,label:"18 Monate"}],we=[{value:"abc",label:"A + B + C"},{value:"ab",label:"Nur A + B"},{value:"a",label:"Nur A"}];function f(t,d){const u=Number(t);return Number.isFinite(u)?u:d}function x(t,d){return Math.round(f(t,d))}function v(t,d){const u=String(t||"").trim().toUpperCase();return K.some(b=>b.value===u)?u:d}function Y(t,d){const u=String(t||"").trim().toUpperCase();return _.some(b=>b.value===u)?u:d}function oe(t,d=12){const u=Math.round(Number(t||0));return u===6||u===12||u===18?u:d}function ie(t,d="abc"){const u=String(t||"").trim().toLowerCase();return u==="a"||u==="ab"||u==="abc"?u:d}function U(t){if(t==null||t==="")return null;const d=Number(t);return Number.isFinite(d)?d:null}function se(t){if(!Number.isFinite(t))return null;const d=Number(t);return d<=0?null:1/d}function je(t){const d=t.transportLeadTimesDays||{},u=t.cny||{},b=t.paymentDueDefaults||{},G=b.fo||{},S=b.po||{},z=U(t.fxRate),A=U(t.eurUsdRate)??se(z),p=Math.max(0,x(t.freightLagDays,0)),T=(P,C,F)=>{const y=G[P]||{};return{trigger:v(y.triggerEvent,C),offsetDays:x(y.offsetDays,F)}},O=(P,C,F)=>{const y=S[P]||{};return{anchor:Y(y.anchor,C),lagDays:x(y.lagDays,F)}},W=T("freight","ETD",0),Z=T("duty","ETA",0),q=T("eust","ETA",0),B=T("eustRefund","ETA",0),M=O("freight","ETA",p),k=O("duty","ETA",p),E=O("eust","ETA",p),j=O("vatRefund","ETA",0);return{air:Math.max(0,f(d.air,10)),rail:Math.max(0,f(d.rail,25)),sea:Math.max(0,f(d.sea,45)),defaultBufferDays:Math.max(0,f(t.defaultBufferDays,0)),defaultCurrency:String(t.defaultCurrency||"EUR"),fxRate:z,eurUsdRate:A,defaultProductionLeadTimeDays:Math.max(0,f(t.defaultProductionLeadTimeDays,45)),dutyRatePct:Math.max(0,f(t.dutyRatePct,0)),eustRatePct:Math.max(0,f(t.eustRatePct,0)),defaultDdp:t.defaultDdp===!0,safetyStockDohDefault:Math.max(0,f(t.safetyStockDohDefault,60)),robustnessLookaheadDaysNonDdp:Math.max(1,f(t.robustnessLookaheadDaysNonDdp,90)),robustnessLookaheadDaysDdp:Math.max(1,f(t.robustnessLookaheadDaysDdp,35)),foCoverageDohDefault:Math.max(0,f(t.foCoverageDohDefault,90)),moqDefaultUnits:Math.max(0,Math.round(f(t.moqDefaultUnits,500))),skuPlanningHorizonMonths:oe(t.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:ie(t.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(f(t.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:t.skuPlanningShowSimulationByDefault!==!1,monthAnchorDay:String(t.monthAnchorDay||"START"),cnyStart:String(u.start||""),cnyEnd:String(u.end||""),foFreightDueTrigger:W.trigger,foFreightDueOffsetDays:W.offsetDays,foDutyDueTrigger:Z.trigger,foDutyDueOffsetDays:Z.offsetDays,foEustDueTrigger:q.trigger,foEustDueOffsetDays:q.offsetDays,foEustRefundDueTrigger:B.trigger,foEustRefundDueOffsetDays:B.offsetDays,poFreightDueAnchor:M.anchor,poFreightDueLagDays:M.lagDays,poDutyDueAnchor:k.anchor,poDutyDueLagDays:k.lagDays,poEustDueAnchor:E.anchor,poEustDueLagDays:E.lagDays,poVatRefundDueAnchor:j.anchor,poVatRefundDueLagDays:j.lagDays}}function w(){return new Date().toISOString()}function Ue(t){return`${t}-${Math.random().toString(36).slice(2,9)}`}function ae(t){return JSON.stringify({air:Number(t.air||0),rail:Number(t.rail||0),sea:Number(t.sea||0),defaultBufferDays:Number(t.defaultBufferDays||0),defaultCurrency:String(t.defaultCurrency||""),fxRate:U(t.fxRate),eurUsdRate:U(t.eurUsdRate),defaultProductionLeadTimeDays:Number(t.defaultProductionLeadTimeDays||0),dutyRatePct:Number(t.dutyRatePct||0),eustRatePct:Number(t.eustRatePct||0),defaultDdp:t.defaultDdp===!0,safetyStockDohDefault:Number(t.safetyStockDohDefault||0),robustnessLookaheadDaysNonDdp:Number(t.robustnessLookaheadDaysNonDdp||0),robustnessLookaheadDaysDdp:Number(t.robustnessLookaheadDaysDdp||0),foCoverageDohDefault:Number(t.foCoverageDohDefault||0),moqDefaultUnits:Number(t.moqDefaultUnits||0),skuPlanningHorizonMonths:oe(t.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:ie(t.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(f(t.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:t.skuPlanningShowSimulationByDefault===!0,monthAnchorDay:String(t.monthAnchorDay||""),cnyStart:String(t.cnyStart||""),cnyEnd:String(t.cnyEnd||""),foFreightDueTrigger:String(t.foFreightDueTrigger||""),foFreightDueOffsetDays:Number(t.foFreightDueOffsetDays||0),foDutyDueTrigger:String(t.foDutyDueTrigger||""),foDutyDueOffsetDays:Number(t.foDutyDueOffsetDays||0),foEustDueTrigger:String(t.foEustDueTrigger||""),foEustDueOffsetDays:Number(t.foEustDueOffsetDays||0),foEustRefundDueTrigger:String(t.foEustRefundDueTrigger||""),foEustRefundDueOffsetDays:Number(t.foEustRefundDueOffsetDays||0),poFreightDueAnchor:String(t.poFreightDueAnchor||""),poFreightDueLagDays:Number(t.poFreightDueLagDays||0),poDutyDueAnchor:String(t.poDutyDueAnchor||""),poDutyDueLagDays:Number(t.poDutyDueLagDays||0),poEustDueAnchor:String(t.poEustDueAnchor||""),poEustDueLagDays:Number(t.poEustDueLagDays||0),poVatRefundDueAnchor:String(t.poVatRefundDueAnchor||""),poVatRefundDueLagDays:Number(t.poVatRefundDueLagDays||0)})}function ze(t){return t instanceof HTMLElement?!!(t.matches("input:not([type='hidden']), textarea, [contenteditable='true']")||t.closest(".ant-select, .ant-picker, .ant-input-number")):!1}function Ze(){const{state:t,loading:d,saving:u,error:b,lastSavedAt:G,saveWith:S}=Ce(),z=Oe(),A=t.settings||{},[p]=n.useForm(),T=n.useWatch("fxRate",p),O=h.useMemo(()=>se(U(T)),[T]),[W,Z]=h.useState(()=>je(A)),[q,B]=h.useState(""),[M,k]=h.useState(null),[E]=n.useForm(),j=h.useRef(null),P=h.useRef(""),[C,F]=h.useState(""),[y]=n.useForm(),[be,Q]=h.useState(null),[ue,le]=h.useState(""),[de,ce]=h.useState("");h.useEffect(()=>{const r=je(A);Z(r),p.setFieldsValue(r),P.current=ae(r)},[p,A]),h.useEffect(()=>()=>{j.current!=null&&(window.clearTimeout(j.current),j.current=null)},[]);const Se=h.useMemo(()=>{const r=Array.isArray(t.productCategories)?t.productCategories:[],c=Array.isArray(t.products)?t.products:[],o=new Map;return c.forEach(s=>{const i=String(s.categoryId||"");o.set(i,(o.get(i)||0)+1)}),r.map(s=>{const i=s;return{id:String(i.id||""),name:String(i.name||""),sortOrder:f(i.sortOrder,0),productCount:o.get(String(i.id||""))||0}}).sort((s,i)=>s.sortOrder-i.sortOrder||s.name.localeCompare(i.name))},[t.productCategories,t.products]),Ee=h.useMemo(()=>{const r=re(A),c=Object.entries(r).map(([s,i])=>({email:s,displayName:i})),o=$(z.email);return o&&!c.some(s=>$(s.email)===o)&&c.push({email:o,displayName:""}),c.sort((s,i)=>s.email.localeCompare(i.email))},[A,z.email]),ee=h.useMemo(()=>Me({settings:t.settings,products:t.products,suppliers:t.suppliers,pos:t.pos,fos:t.fos}).issues||[],[t.settings,t.products,t.suppliers,t.pos,t.fos]),Ne=h.useMemo(()=>[{header:"Name",accessorKey:"name"},{header:"Sortierung",accessorKey:"sortOrder"},{header:"Produkte",accessorKey:"productCount"},{header:"Aktionen",cell:({row:r})=>e.jsxs(X,{children:[e.jsx(I,{size:"small",onClick:()=>{k(r.original),E.setFieldsValue({name:r.original.name,sortOrder:r.original.sortOrder})},children:"Bearbeiten"}),e.jsx(I,{size:"small",danger:!0,onClick:()=>{ne.confirm({title:"Kategorie loeschen?",content:"Produkte dieser Kategorie werden auf 'ohne Kategorie' gesetzt.",onOk:async()=>{await S(c=>{const o=L(c);return o.productCategories=(Array.isArray(o.productCategories)?o.productCategories:[]).filter(s=>String(s.id||"")!==r.original.id),o.products=(Array.isArray(o.products)?o.products:[]).map(s=>{const i=s;return String(i.categoryId||"")!==r.original.id?i:{...i,categoryId:null}}),o},"v2:settings:category-delete")}})},children:"Loeschen"})]})}],[E,S]);async function Ae(r,c="v2:settings:save"){if(r.cnyStart&&!r.cnyEnd||!r.cnyStart&&r.cnyEnd)throw new Error("Bitte CNY Start und Ende gemeinsam setzen.");if(r.cnyStart&&r.cnyEnd&&r.cnyStart>r.cnyEnd)throw new Error("CNY Start darf nicht nach dem Ende liegen.");const o=U(r.fxRate),s=se(o);await S(i=>{const m=L(i),V=m.settings||{};return m.settings={...V,transportLeadTimesDays:{...V.transportLeadTimesDays||{},air:Math.max(0,Math.round(r.air)),rail:Math.max(0,Math.round(r.rail)),sea:Math.max(0,Math.round(r.sea))},defaultBufferDays:Math.max(0,Math.round(r.defaultBufferDays)),defaultCurrency:r.defaultCurrency,fxRate:o,eurUsdRate:s,defaultProductionLeadTimeDays:Math.max(0,Math.round(r.defaultProductionLeadTimeDays)),dutyRatePct:Math.max(0,Number(r.dutyRatePct||0)),eustRatePct:Math.max(0,Number(r.eustRatePct||0)),defaultDdp:r.defaultDdp===!0,safetyStockDohDefault:Math.max(0,Math.round(r.safetyStockDohDefault)),robustnessLookaheadDaysNonDdp:Math.max(1,Math.round(r.robustnessLookaheadDaysNonDdp)),robustnessLookaheadDaysDdp:Math.max(1,Math.round(r.robustnessLookaheadDaysDdp)),foCoverageDohDefault:Math.max(0,Math.round(r.foCoverageDohDefault)),moqDefaultUnits:Math.max(0,Math.round(r.moqDefaultUnits)),skuPlanningHorizonMonths:oe(r.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:ie(r.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(f(r.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:r.skuPlanningShowSimulationByDefault===!0,monthAnchorDay:r.monthAnchorDay,cny:{start:r.cnyStart||"",end:r.cnyEnd||""},paymentDueDefaults:{fo:{freight:{triggerEvent:v(r.foFreightDueTrigger,"ETD"),offsetDays:x(r.foFreightDueOffsetDays,0)},duty:{triggerEvent:v(r.foDutyDueTrigger,"ETA"),offsetDays:x(r.foDutyDueOffsetDays,0)},eust:{triggerEvent:v(r.foEustDueTrigger,"ETA"),offsetDays:x(r.foEustDueOffsetDays,0)},eustRefund:{triggerEvent:v(r.foEustRefundDueTrigger,"ETA"),offsetDays:x(r.foEustRefundDueOffsetDays,0)}},po:{freight:{anchor:Y(r.poFreightDueAnchor,"ETA"),lagDays:x(r.poFreightDueLagDays,0)},duty:{anchor:Y(r.poDutyDueAnchor,"ETA"),lagDays:x(r.poDutyDueLagDays,0)},eust:{anchor:Y(r.poEustDueAnchor,"ETA"),lagDays:x(r.poEustDueLagDays,0)},vatRefund:{anchor:Y(r.poVatRefundDueAnchor,"ETA"),lagDays:x(r.poVatRefundDueLagDays,0)}}},freightLagDays:x(r.poFreightDueLagDays,0),lastUpdatedAt:w()},m},c),P.current=ae(r),F(`Gespeichert: ${new Date().toLocaleTimeString("de-DE")}`)}function te(r=420){j.current!=null&&window.clearTimeout(j.current),j.current=window.setTimeout(()=>{if(j.current=null,u){te();return}const c=p.getFieldsValue(!0);ae(c)!==P.current&&p.validateFields().then(s=>Ae(s,"v2:settings:auto")).catch(()=>{})},Math.max(80,Number(r)||420))}async function me(r,c){const o=$(r),s=String(c||"").trim();if(!o||!s)throw new Error("Bitte E-Mail und Anzeigenamen setzen.");await S(i=>{const m=L(i),V=m.settings||{},ge=re(V);return ge[o]=s,m.settings={...V,collaborationDisplayNames:ge,lastUpdatedAt:w()},m},"v2:settings:collaboration-name-upsert")}async function he(r){const c=$(r);c&&await S(o=>{const s=L(o),i=s.settings||{},m=re(i);return m[c]&&(delete m[c],s.settings={...i,collaborationDisplayNames:m,lastUpdatedAt:w()}),s},"v2:settings:collaboration-name-remove")}const Te=h.useMemo(()=>[{header:"E-Mail",accessorKey:"email",meta:{width:320}},{header:"Anzeigename",accessorKey:"displayName",meta:{width:210},cell:({row:r})=>r.original.displayName||"—"},{header:"Aktionen",meta:{width:190},cell:({row:r})=>e.jsxs("div",{className:"v2-actions-nowrap",children:[e.jsx(I,{size:"small",onClick:()=>{Q(r.original.email),y.setFieldsValue({email:r.original.email,displayName:r.original.displayName})},children:"Bearbeiten"}),e.jsx(I,{size:"small",danger:!0,disabled:!r.original.displayName,onClick:()=>{he(r.original.email)},children:"Loeschen"})]})}],[y,he]);async function Pe(){const r=q.trim();r&&(await S(c=>{const o=L(c),s=Array.isArray(o.productCategories)?[...o.productCategories]:[];if(s.some(m=>String(m.name||"").trim().toLowerCase()===r.toLowerCase()))throw new Error("Kategorie existiert bereits.");return s.push({id:Ue("cat"),name:r,sortOrder:s.length,createdAt:w(),updatedAt:w()}),o.productCategories=s,o},"v2:settings:category-add"),B(""))}async function Re(r){if(!M)return;const c=r.name.trim();c&&(await S(o=>{const s=L(o);return s.productCategories=(Array.isArray(s.productCategories)?s.productCategories:[]).map(i=>{const m=i;return String(m.id||"")!==M.id?m:{...m,name:c,sortOrder:Math.max(0,Math.round(r.sortOrder||0)),updatedAt:w()}}),s},"v2:settings:category-update"),k(null),E.resetFields())}return e.jsxs("div",{className:"v2-page",children:[e.jsxs(H,{className:"v2-intro-card",children:[e.jsx("div",{className:"v2-page-head",children:e.jsxs("div",{children:[e.jsx(R,{level:3,children:"Settings"}),e.jsx(ye,{children:"Lead Times, Defaults, CNY-Fenster und Kategorien für die operative Planung."})]})}),e.jsx("div",{className:"v2-toolbar",children:e.jsxs("div",{className:"v2-toolbar-row",children:[u?e.jsx(J,{color:"processing",children:"Speichern..."}):null,G?e.jsxs(J,{color:"green",children:["Gespeichert: ",new Date(G).toLocaleTimeString("de-DE")]}):null,C?e.jsx(J,{color:"blue",children:C}):null]})})]}),b?e.jsx(fe,{type:"error",showIcon:!0,message:b}):null,d?e.jsx(fe,{type:"info",showIcon:!0,message:"Workspace wird geladen..."}):null,e.jsx(H,{children:e.jsxs(n,{name:"v2-settings-form",form:p,layout:"vertical",initialValues:W,onValuesChange:()=>{F("Ungespeicherte Aenderungen"),te(360)},onBlurCapture:r=>{ze(r.target)&&te(120)},children:[e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Air (Tage)",name:"air",rules:[{required:!0}],children:e.jsx(l,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Rail (Tage)",name:"rail",rules:[{required:!0}],children:e.jsx(l,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Sea (Tage)",name:"sea",rules:[{required:!0}],children:e.jsx(l,{mode:"int",min:0})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Buffer Days",name:"defaultBufferDays",rules:[{required:!0}],children:e.jsx(l,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Default Currency",name:"defaultCurrency",rules:[{required:!0}],children:e.jsx(D,{options:Fe.map(r=>({value:r,label:r}))})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Monats-Anker",name:"monthAnchorDay",rules:[{required:!0}],children:e.jsx(D,{options:Ie})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"FX Kurs (USD je EUR)",name:"fxRate",children:e.jsx(l,{mode:"fx",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"FX Kurs (EUR je USD)",extra:"Automatisch aus USD je EUR berechnet.",children:e.jsx(l,{mode:"fx",min:0,value:O??void 0,disabled:!0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"MOQ Default (Units)",name:"moqDefaultUnits",children:e.jsx(l,{mode:"int",min:0})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Safety Stock DOH",name:"safetyStockDohDefault",children:e.jsx(l,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"FO Coverage DOH",name:"foCoverageDohDefault",children:e.jsx(l,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Default Production Lead Time (Tage)",name:"defaultProductionLeadTimeDays",children:e.jsx(l,{mode:"int",min:0})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Robustheit Lookahead (Tage) Standard",name:"robustnessLookaheadDaysNonDdp",children:e.jsx(l,{mode:"int",min:1})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Robustheit Lookahead (Tage) DDP",name:"robustnessLookaheadDaysDdp",children:e.jsx(l,{mode:"int",min:1})})})]}),e.jsx(R,{level:5,style:{marginTop:4},children:"SKU Planung (Simulation)"}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Planungshorizont",name:"skuPlanningHorizonMonths",rules:[{required:!0}],children:e.jsx(D,{options:Le})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"ABC-Klassen",name:"skuPlanningAbcFilter",rules:[{required:!0}],children:e.jsx(D,{options:we})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Max. Phantom-FO Vorschlaege je SKU",name:"skuPlanningMaxPhantomSuggestionsPerSku",children:e.jsx(l,{mode:"int",min:1})})})]}),e.jsx(g,{gutter:16,children:e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{name:"skuPlanningShowSimulationByDefault",valuePropName:"checked",children:e.jsx(xe,{children:"Simulation standardmaessig anzeigen"})})})}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Default Zollsatz %",name:"dutyRatePct",children:e.jsx(l,{mode:"percent",min:0,max:100})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"Default EUSt %",name:"eustRatePct",children:e.jsx(l,{mode:"percent",min:0,max:100})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{name:"defaultDdp",valuePropName:"checked",style:{marginTop:30},children:e.jsx(xe,{children:"Default DDP aktiv"})})})]}),e.jsx(R,{level:5,style:{marginTop:4},children:"Fälligkeit Defaults FO (Auto-Zahlungen)"}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO Freight Trigger",name:"foFreightDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:K})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO Freight Offset (Tage)",name:"foFreightDueOffsetDays",rules:[{required:!0}],children:e.jsx(l,{mode:"int"})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO Duty Trigger",name:"foDutyDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:K})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO Duty Offset (Tage)",name:"foDutyDueOffsetDays",rules:[{required:!0}],children:e.jsx(l,{mode:"int"})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO EUSt Trigger",name:"foEustDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:K})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO EUSt Offset (Tage)",name:"foEustDueOffsetDays",rules:[{required:!0}],children:e.jsx(l,{mode:"int"})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO EUSt Refund Trigger",name:"foEustRefundDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:K})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO EUSt Refund Offset (Tage)",name:"foEustRefundDueOffsetDays",rules:[{required:!0}],children:e.jsx(l,{mode:"int"})})})]}),e.jsx(R,{level:5,style:{marginTop:4},children:"Fälligkeit Defaults PO (Auto-Zahlungen)"}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO Freight Anchor",name:"poFreightDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO Freight Offset (Tage)",name:"poFreightDueLagDays",rules:[{required:!0}],children:e.jsx(l,{mode:"int"})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO Duty Anchor",name:"poDutyDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO Duty Offset (Tage)",name:"poDutyDueLagDays",rules:[{required:!0}],children:e.jsx(l,{mode:"int"})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO EUSt Anchor",name:"poEustDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO EUSt Offset (Tage)",name:"poEustDueLagDays",rules:[{required:!0}],children:e.jsx(l,{mode:"int"})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO VAT Refund Anchor",name:"poVatRefundDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO VAT Refund Offset (Tage)",name:"poVatRefundDueLagDays",rules:[{required:!0}],children:e.jsx(l,{mode:"int"})})})]}),e.jsxs(g,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"CNY Start",name:"cnyStart",children:e.jsx(N,{type:"date"})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(n.Item,{label:"CNY Ende",name:"cnyEnd",children:e.jsx(N,{type:"date"})})})]})]})}),e.jsxs(H,{children:[e.jsx(R,{level:4,children:"Team Anzeige-Namen"}),e.jsx(ye,{children:"Hinterlege optionale Vornamen pro E-Mail. Diese Namen werden in Live-Presence und Modal-Hinweisen angezeigt."}),e.jsxs(X,{style:{marginBottom:12},wrap:!0,children:[e.jsx(N,{value:ue,onChange:r=>le(r.target.value),placeholder:"E-Mail",style:{width:280}}),e.jsx(N,{value:de,onChange:r=>ce(r.target.value),placeholder:"Anzeigename (z. B. Pierre)",style:{width:220}}),e.jsx(I,{onClick:()=>{me(ue,de).then(()=>{le(""),ce("")})},children:"Speichern"})]}),e.jsx(De,{data:Ee,columns:Te,minTableWidth:880,tableLayout:"auto"})]}),e.jsxs(H,{children:[e.jsx(R,{level:4,children:"Produktkategorien"}),e.jsxs(X,{style:{marginBottom:12},children:[e.jsx(N,{value:q,onChange:r=>B(r.target.value),placeholder:"Neue Kategorie",style:{width:260}}),e.jsx(I,{onClick:()=>{Pe()},children:"Hinzufuegen"})]}),e.jsx(De,{data:Se,columns:Ne})]}),e.jsxs(H,{children:[e.jsx(R,{level:4,children:"Data Health"}),ee.length?e.jsxs(X,{direction:"vertical",size:6,children:[e.jsxs(J,{color:"orange",children:[ee.length," Issues"]}),ee.slice(0,10).map(r=>e.jsx(pe,{children:r.message},r.id))]}):e.jsx(pe,{type:"secondary",children:"Keine Issues gefunden."})]}),e.jsx(ne,{title:"Kategorie bearbeiten",open:!!M,onCancel:()=>k(null),onOk:()=>{E.validateFields().then(r=>Re(r)).catch(()=>{})},children:e.jsxs(n,{form:E,layout:"vertical",children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Name ist erforderlich."}],children:e.jsx(N,{})}),e.jsx(n.Item,{name:"sortOrder",label:"Sortierung",rules:[{required:!0}],children:e.jsx(l,{mode:"int",min:0})})]})}),e.jsx(ne,{title:"Anzeigename bearbeiten",open:!!be,onCancel:()=>Q(null),onOk:()=>{y.validateFields().then(r=>{me(r.email,r.displayName).then(()=>{Q(null),y.resetFields()})}).catch(()=>{})},children:e.jsxs(n,{form:y,layout:"vertical",children:[e.jsx(n.Item,{name:"email",label:"E-Mail",rules:[{required:!0,message:"E-Mail fehlt."}],children:e.jsx(N,{disabled:!0})}),e.jsx(n.Item,{name:"displayName",label:"Anzeigename",rules:[{required:!0,message:"Anzeigename fehlt."}],children:e.jsx(N,{placeholder:"z. B. Pierre"})})]})})]})}export{Ze as default};
