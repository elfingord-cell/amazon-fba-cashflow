import{aj as Oe,ac as r,t as f,al as re,br as X,v as ke,k as e,S as J,Q as F,ad as ae,$ as L,L as Ce,M as ee,N as De,R as h,O as a,ae as j}from"./index-CLY33OwN.js";import{D as u}from"./DeNumberInput-BgQg1TAI.js";import{D as xe}from"./DataTable-BjeYtyGx.js";import{u as Ie,C as V}from"./workspace-C0RZrezu.js";import{S as D}from"./index-D9EVM7K1.js";import{C as ye}from"./index-CNjYVI11.js";import"./index-BG3lW2vW.js";import"./DownOutlined-D4bNLht_.js";import"./Dropdown-W4AkzUs7.js";import"./useBubbleLock-CaefWGFu.js";const{Paragraph:pe,Text:je,Title:N}=Ce,Fe=["EUR","USD","CNY"],Le=[{value:"START",label:"Start (1. Tag)"},{value:"MID",label:"Mitte (15. Tag)"},{value:"END",label:"Ende (letzter Tag)"}],_=[{value:"ORDER_DATE",label:"ORDER_DATE"},{value:"PRODUCTION_END",label:"PRODUCTION_END"},{value:"ETD",label:"ETD"},{value:"ETA",label:"ETA"},{value:"DELIVERY",label:"DELIVERY"}],v=[{value:"ORDER_DATE",label:"ORDER_DATE"},{value:"PROD_DONE",label:"PROD_DONE"},{value:"ETD",label:"ETD"},{value:"ETA",label:"ETA"}],we=[{value:6,label:"6 Monate"},{value:12,label:"12 Monate"},{value:18,label:"18 Monate"}],ze=[{value:"abc",label:"A + B + C"},{value:"ab",label:"Nur A + B"},{value:"a",label:"Nur A"}];function m(t,d){const l=Number(t);return Number.isFinite(l)?l:d}function x(t,d){return Math.round(m(t,d))}function Y(t,d){const l=String(t||"").trim().toUpperCase();return _.some(b=>b.value===l)?l:d}function $(t,d){const l=String(t||"").trim().toUpperCase();return v.some(b=>b.value===l)?l:d}function ie(t,d=12){const l=Math.round(Number(t||0));return l===6||l===12||l===18?l:d}function ue(t,d="abc"){const l=String(t||"").trim().toLowerCase();return l==="a"||l==="ab"||l==="abc"?l:d}function z(t){if(t==null||t==="")return null;const d=Number(t);return Number.isFinite(d)?d:null}function oe(t){if(!Number.isFinite(t))return null;const d=Number(t);return d<=0?null:1/d}function Se(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`}function be(t){const d=t.transportLeadTimesDays||{},l=t.cny||{},b=t.paymentDueDefaults||{},G=b.fo||{},S=b.po||{},B=z(t.fxRate),A=z(t.eurUsdRate)??oe(B),y=Math.max(0,x(t.freightLagDays,0)),T=(I,E,K)=>{const R=G[I]||{};return{trigger:Y(R.triggerEvent,E),offsetDays:x(R.offsetDays,K)}},P=(I,E,K)=>{const R=S[I]||{};return{anchor:$(R.anchor,E),lagDays:x(R.lagDays,K)}},W=T("freight","ETD",0),Z=T("duty","ETA",0),U=T("eust","ETA",0),q=T("eustRefund","ETA",0),O=P("freight","ETA",y),k=P("duty","ETA",y),M=P("eust","ETA",y),p=P("vatRefund","ETA",0),C=String(t.startMonth||"").trim(),Q=/^\d{4}-\d{2}$/.test(C)?C:Se();return{openingBalance:Math.max(0,m(t.openingBalance,0)),startMonth:Q,horizonMonths:Math.max(1,Math.round(m(t.horizonMonths,18))),air:Math.max(0,m(d.air,10)),rail:Math.max(0,m(d.rail,25)),sea:Math.max(0,m(d.sea,45)),defaultBufferDays:Math.max(0,m(t.defaultBufferDays,0)),defaultCurrency:String(t.defaultCurrency||"EUR"),fxRate:B,eurUsdRate:A,defaultProductionLeadTimeDays:Math.max(0,m(t.defaultProductionLeadTimeDays,45)),dutyRatePct:Math.max(0,m(t.dutyRatePct,0)),eustRatePct:Math.max(0,m(t.eustRatePct,0)),defaultDdp:t.defaultDdp===!0,safetyStockDohDefault:Math.max(0,m(t.safetyStockDohDefault,60)),robustnessLookaheadDaysNonDdp:Math.max(1,m(t.robustnessLookaheadDaysNonDdp,90)),robustnessLookaheadDaysDdp:Math.max(1,m(t.robustnessLookaheadDaysDdp,35)),foCoverageDohDefault:Math.max(0,m(t.foCoverageDohDefault,90)),moqDefaultUnits:Math.max(0,Math.round(m(t.moqDefaultUnits,500))),foRecommendationRoundupCartonBlock:Math.max(1,Math.round(m(t.foRecommendationRoundupCartonBlock,10))),foRecommendationRoundupMaxPct:Math.max(0,m(t.foRecommendationRoundupMaxPct,10)),skuPlanningHorizonMonths:ie(t.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:ue(t.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(m(t.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:t.skuPlanningShowSimulationByDefault!==!1,monthAnchorDay:String(t.monthAnchorDay||"START"),cnyStart:String(l.start||""),cnyEnd:String(l.end||""),foFreightDueTrigger:W.trigger,foFreightDueOffsetDays:W.offsetDays,foDutyDueTrigger:Z.trigger,foDutyDueOffsetDays:Z.offsetDays,foEustDueTrigger:U.trigger,foEustDueOffsetDays:U.offsetDays,foEustRefundDueTrigger:q.trigger,foEustRefundDueOffsetDays:q.offsetDays,poFreightDueAnchor:O.anchor,poFreightDueLagDays:O.lagDays,poDutyDueAnchor:k.anchor,poDutyDueLagDays:k.lagDays,poEustDueAnchor:M.anchor,poEustDueLagDays:M.lagDays,poVatRefundDueAnchor:p.anchor,poVatRefundDueLagDays:p.lagDays}}function w(){return new Date().toISOString()}function Be(t){return`${t}-${Math.random().toString(36).slice(2,9)}`}function se(t){return JSON.stringify({openingBalance:Number(t.openingBalance||0),startMonth:String(t.startMonth||""),horizonMonths:Math.max(1,Math.round(Number(t.horizonMonths||1))),air:Number(t.air||0),rail:Number(t.rail||0),sea:Number(t.sea||0),defaultBufferDays:Number(t.defaultBufferDays||0),defaultCurrency:String(t.defaultCurrency||""),fxRate:z(t.fxRate),eurUsdRate:z(t.eurUsdRate),defaultProductionLeadTimeDays:Number(t.defaultProductionLeadTimeDays||0),dutyRatePct:Number(t.dutyRatePct||0),eustRatePct:Number(t.eustRatePct||0),defaultDdp:t.defaultDdp===!0,safetyStockDohDefault:Number(t.safetyStockDohDefault||0),robustnessLookaheadDaysNonDdp:Number(t.robustnessLookaheadDaysNonDdp||0),robustnessLookaheadDaysDdp:Number(t.robustnessLookaheadDaysDdp||0),foCoverageDohDefault:Number(t.foCoverageDohDefault||0),moqDefaultUnits:Number(t.moqDefaultUnits||0),foRecommendationRoundupCartonBlock:Number(t.foRecommendationRoundupCartonBlock||0),foRecommendationRoundupMaxPct:Number(t.foRecommendationRoundupMaxPct||0),skuPlanningHorizonMonths:ie(t.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:ue(t.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(m(t.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:t.skuPlanningShowSimulationByDefault===!0,monthAnchorDay:String(t.monthAnchorDay||""),cnyStart:String(t.cnyStart||""),cnyEnd:String(t.cnyEnd||""),foFreightDueTrigger:String(t.foFreightDueTrigger||""),foFreightDueOffsetDays:Number(t.foFreightDueOffsetDays||0),foDutyDueTrigger:String(t.foDutyDueTrigger||""),foDutyDueOffsetDays:Number(t.foDutyDueOffsetDays||0),foEustDueTrigger:String(t.foEustDueTrigger||""),foEustDueOffsetDays:Number(t.foEustDueOffsetDays||0),foEustRefundDueTrigger:String(t.foEustRefundDueTrigger||""),foEustRefundDueOffsetDays:Number(t.foEustRefundDueOffsetDays||0),poFreightDueAnchor:String(t.poFreightDueAnchor||""),poFreightDueLagDays:Number(t.poFreightDueLagDays||0),poDutyDueAnchor:String(t.poDutyDueAnchor||""),poDutyDueLagDays:Number(t.poDutyDueLagDays||0),poEustDueAnchor:String(t.poEustDueAnchor||""),poEustDueLagDays:Number(t.poEustDueLagDays||0),poVatRefundDueAnchor:String(t.poVatRefundDueAnchor||""),poVatRefundDueLagDays:Number(t.poVatRefundDueLagDays||0)})}function Ue(t){return t instanceof HTMLElement?!!(t.matches("input:not([type='hidden']), textarea, [contenteditable='true']")||t.closest(".ant-select, .ant-picker, .ant-input-number")):!1}function Ze(){const{state:t,loading:d,saving:l,error:b,lastSavedAt:G,saveWith:S}=Ie(),B=Oe(),A=t.settings||{},[y]=r.useForm(),T=r.useWatch("fxRate",y),P=f.useMemo(()=>oe(z(T)),[T]),[W,Z]=f.useState(()=>be(A)),[U,q]=f.useState(""),[O,k]=f.useState(null),[M]=r.useForm(),p=f.useRef(null),C=f.useRef(""),[Q,I]=f.useState(""),[E]=r.useForm(),[K,R]=f.useState(null),[le,de]=f.useState(""),[ce,me]=f.useState("");f.useEffect(()=>{const n=be(A);Z(n),y.setFieldsValue(n),C.current=se(n)},[y,A]),f.useEffect(()=>()=>{p.current!=null&&(window.clearTimeout(p.current),p.current=null)},[]);const Ee=f.useMemo(()=>{const n=Array.isArray(t.productCategories)?t.productCategories:[],c=Array.isArray(t.products)?t.products:[],o=new Map;return c.forEach(s=>{const i=String(s.categoryId||"");o.set(i,(o.get(i)||0)+1)}),n.map(s=>{const i=s;return{id:String(i.id||""),name:String(i.name||""),sortOrder:m(i.sortOrder,0),productCount:o.get(String(i.id||""))||0}}).sort((s,i)=>s.sortOrder-i.sortOrder||s.name.localeCompare(i.name))},[t.productCategories,t.products]),Re=f.useMemo(()=>{const n=re(A),c=Object.entries(n).map(([s,i])=>({email:s,displayName:i})),o=X(B.email);return o&&!c.some(s=>X(s.email)===o)&&c.push({email:o,displayName:""}),c.sort((s,i)=>s.email.localeCompare(i.email))},[A,B.email]),te=f.useMemo(()=>ke({settings:t.settings,products:t.products,suppliers:t.suppliers,pos:t.pos,fos:t.fos}).issues||[],[t.settings,t.products,t.suppliers,t.pos,t.fos]),Me=f.useMemo(()=>[{header:"Name",accessorKey:"name"},{header:"Sortierung",accessorKey:"sortOrder"},{header:"Produkte",accessorKey:"productCount"},{header:"Aktionen",cell:({row:n})=>e.jsxs(J,{children:[e.jsx(F,{size:"small",onClick:()=>{k(n.original),M.setFieldsValue({name:n.original.name,sortOrder:n.original.sortOrder})},children:"Bearbeiten"}),e.jsx(F,{size:"small",danger:!0,onClick:()=>{ae.confirm({title:"Kategorie loeschen?",content:"Produkte dieser Kategorie werden auf 'ohne Kategorie' gesetzt.",onOk:async()=>{await S(c=>{const o=L(c);return o.productCategories=(Array.isArray(o.productCategories)?o.productCategories:[]).filter(s=>String(s.id||"")!==n.original.id),o.products=(Array.isArray(o.products)?o.products:[]).map(s=>{const i=s;return String(i.categoryId||"")!==n.original.id?i:{...i,categoryId:null}}),o},"v2:settings:category-delete")}})},children:"Loeschen"})]})}],[M,S]);async function Ne(n,c="v2:settings:save"){if(n.cnyStart&&!n.cnyEnd||!n.cnyStart&&n.cnyEnd)throw new Error("Bitte CNY Start und Ende gemeinsam setzen.");if(n.cnyStart&&n.cnyEnd&&n.cnyStart>n.cnyEnd)throw new Error("CNY Start darf nicht nach dem Ende liegen.");const o=z(n.fxRate),s=oe(o);await S(i=>{const g=L(i),H=g.settings||{};return g.settings={...H,openingBalance:Math.max(0,Number(n.openingBalance||0)),startMonth:/^\d{4}-\d{2}$/.test(String(n.startMonth||""))?String(n.startMonth):Se(),horizonMonths:Math.max(1,Math.round(Number(n.horizonMonths||1))),transportLeadTimesDays:{...H.transportLeadTimesDays||{},air:Math.max(0,Math.round(n.air)),rail:Math.max(0,Math.round(n.rail)),sea:Math.max(0,Math.round(n.sea))},defaultBufferDays:Math.max(0,Math.round(n.defaultBufferDays)),defaultCurrency:n.defaultCurrency,fxRate:o,eurUsdRate:s,defaultProductionLeadTimeDays:Math.max(0,Math.round(n.defaultProductionLeadTimeDays)),dutyRatePct:Math.max(0,Number(n.dutyRatePct||0)),eustRatePct:Math.max(0,Number(n.eustRatePct||0)),defaultDdp:n.defaultDdp===!0,safetyStockDohDefault:Math.max(0,Math.round(n.safetyStockDohDefault)),robustnessLookaheadDaysNonDdp:Math.max(1,Math.round(n.robustnessLookaheadDaysNonDdp)),robustnessLookaheadDaysDdp:Math.max(1,Math.round(n.robustnessLookaheadDaysDdp)),foCoverageDohDefault:Math.max(0,Math.round(n.foCoverageDohDefault)),moqDefaultUnits:Math.max(0,Math.round(n.moqDefaultUnits)),foRecommendationRoundupCartonBlock:Math.max(1,Math.round(n.foRecommendationRoundupCartonBlock)),foRecommendationRoundupMaxPct:Math.max(0,Number(n.foRecommendationRoundupMaxPct||0)),skuPlanningHorizonMonths:ie(n.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:ue(n.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(m(n.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:n.skuPlanningShowSimulationByDefault===!0,monthAnchorDay:n.monthAnchorDay,cny:{start:n.cnyStart||"",end:n.cnyEnd||""},paymentDueDefaults:{fo:{freight:{triggerEvent:Y(n.foFreightDueTrigger,"ETD"),offsetDays:x(n.foFreightDueOffsetDays,0)},duty:{triggerEvent:Y(n.foDutyDueTrigger,"ETA"),offsetDays:x(n.foDutyDueOffsetDays,0)},eust:{triggerEvent:Y(n.foEustDueTrigger,"ETA"),offsetDays:x(n.foEustDueOffsetDays,0)},eustRefund:{triggerEvent:Y(n.foEustRefundDueTrigger,"ETA"),offsetDays:x(n.foEustRefundDueOffsetDays,0)}},po:{freight:{anchor:$(n.poFreightDueAnchor,"ETA"),lagDays:x(n.poFreightDueLagDays,0)},duty:{anchor:$(n.poDutyDueAnchor,"ETA"),lagDays:x(n.poDutyDueLagDays,0)},eust:{anchor:$(n.poEustDueAnchor,"ETA"),lagDays:x(n.poEustDueLagDays,0)},vatRefund:{anchor:$(n.poVatRefundDueAnchor,"ETA"),lagDays:x(n.poVatRefundDueLagDays,0)}}},freightLagDays:x(n.poFreightDueLagDays,0),lastUpdatedAt:w()},g},c),C.current=se(n),I(`Gespeichert: ${new Date().toLocaleTimeString("de-DE")}`)}function ne(n=420){p.current!=null&&window.clearTimeout(p.current),p.current=window.setTimeout(()=>{if(p.current=null,l){ne();return}const c=y.getFieldsValue(!0);se(c)!==C.current&&y.validateFields().then(s=>Ne(s,"v2:settings:auto")).catch(()=>{})},Math.max(80,Number(n)||420))}async function he(n,c){const o=X(n),s=String(c||"").trim();if(!o||!s)throw new Error("Bitte E-Mail und Anzeigenamen setzen.");await S(i=>{const g=L(i),H=g.settings||{},fe=re(H);return fe[o]=s,g.settings={...H,collaborationDisplayNames:fe,lastUpdatedAt:w()},g},"v2:settings:collaboration-name-upsert")}async function ge(n){const c=X(n);c&&await S(o=>{const s=L(o),i=s.settings||{},g=re(i);return g[c]&&(delete g[c],s.settings={...i,collaborationDisplayNames:g,lastUpdatedAt:w()}),s},"v2:settings:collaboration-name-remove")}const Ae=f.useMemo(()=>[{header:"E-Mail",accessorKey:"email",meta:{width:320}},{header:"Anzeigename",accessorKey:"displayName",meta:{width:210},cell:({row:n})=>n.original.displayName||"—"},{header:"Aktionen",meta:{width:190},cell:({row:n})=>e.jsxs("div",{className:"v2-actions-nowrap",children:[e.jsx(F,{size:"small",onClick:()=>{R(n.original.email),E.setFieldsValue({email:n.original.email,displayName:n.original.displayName})},children:"Bearbeiten"}),e.jsx(F,{size:"small",danger:!0,disabled:!n.original.displayName,onClick:()=>{ge(n.original.email)},children:"Loeschen"})]})}],[E,ge]);async function Te(){const n=U.trim();n&&(await S(c=>{const o=L(c),s=Array.isArray(o.productCategories)?[...o.productCategories]:[];if(s.some(g=>String(g.name||"").trim().toLowerCase()===n.toLowerCase()))throw new Error("Kategorie existiert bereits.");return s.push({id:Be("cat"),name:n,sortOrder:s.length,createdAt:w(),updatedAt:w()}),o.productCategories=s,o},"v2:settings:category-add"),q(""))}async function Pe(n){if(!O)return;const c=n.name.trim();c&&(await S(o=>{const s=L(o);return s.productCategories=(Array.isArray(s.productCategories)?s.productCategories:[]).map(i=>{const g=i;return String(g.id||"")!==O.id?g:{...g,name:c,sortOrder:Math.max(0,Math.round(n.sortOrder||0)),updatedAt:w()}}),s},"v2:settings:category-update"),k(null),M.resetFields())}return e.jsxs("div",{className:"v2-page",children:[e.jsxs(V,{className:"v2-intro-card",children:[e.jsx("div",{className:"v2-page-head",children:e.jsxs("div",{children:[e.jsx(N,{level:3,children:"Settings"}),e.jsx(pe,{children:"Lead Times, Defaults, CNY-Fenster und Kategorien für die operative Planung."})]})}),e.jsx("div",{className:"v2-toolbar",children:e.jsxs("div",{className:"v2-toolbar-row",children:[l?e.jsx(ee,{color:"processing",children:"Speichern..."}):null,G?e.jsxs(ee,{color:"green",children:["Gespeichert: ",new Date(G).toLocaleTimeString("de-DE")]}):null,Q?e.jsx(ee,{color:"blue",children:Q}):null]})})]}),b?e.jsx(De,{type:"error",showIcon:!0,message:b}):null,d?e.jsx(De,{type:"info",showIcon:!0,message:"Workspace wird geladen..."}):null,e.jsx(V,{children:e.jsxs(r,{name:"v2-settings-form",form:y,layout:"vertical",initialValues:W,onValuesChange:()=>{I("Ungespeicherte Aenderungen"),ne(360)},onBlurCapture:n=>{Ue(n.target)&&ne(120)},children:[e.jsx(N,{level:5,style:{marginTop:4},children:"Cashflow Basis"}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Opening Balance (EUR)",name:"openingBalance",rules:[{required:!0}],children:e.jsx(u,{mode:"decimal",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Startmonat",name:"startMonth",rules:[{required:!0}],children:e.jsx(j,{type:"month"})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Horizont (Monate)",name:"horizonMonths",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:1,max:48})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Air (Tage)",name:"air",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Rail (Tage)",name:"rail",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Sea (Tage)",name:"sea",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Buffer Days",name:"defaultBufferDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Default Currency",name:"defaultCurrency",rules:[{required:!0}],children:e.jsx(D,{options:Fe.map(n=>({value:n,label:n}))})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Monats-Anker",name:"monthAnchorDay",rules:[{required:!0}],children:e.jsx(D,{options:Le})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"FX Kurs (USD je EUR)",name:"fxRate",children:e.jsx(u,{mode:"fx",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"FX Kurs (EUR je USD)",extra:"Automatisch aus USD je EUR berechnet.",children:e.jsx(u,{mode:"fx",min:0,value:P??void 0,disabled:!0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"MOQ Default (Units)",name:"moqDefaultUnits",children:e.jsx(u,{mode:"int",min:0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Safety Stock DOH",name:"safetyStockDohDefault",children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"FO Coverage DOH",name:"foCoverageDohDefault",children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Default Production Lead Time (Tage)",name:"defaultProductionLeadTimeDays",children:e.jsx(u,{mode:"int",min:0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Roundup Karton-Block",name:"foRecommendationRoundupCartonBlock",extra:"Zusatz-Aufrundung in Kartonschritten (z.B. 10 Kartons).",children:e.jsx(u,{mode:"int",min:1})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Roundup Max %",name:"foRecommendationRoundupMaxPct",extra:"Zusatz-Aufrundung nur, wenn der relative Aufschlag <= diesem Wert ist.",children:e.jsx(u,{mode:"decimal",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Info",extra:"Roundup wirkt zusaetzlich zur Rundung auf volle Kartons (SKU Units pro Karton).",children:e.jsx(j,{value:"Kartonpflicht + Block/%-Regel",readOnly:!0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Robustheit Lookahead (Tage) Standard",name:"robustnessLookaheadDaysNonDdp",children:e.jsx(u,{mode:"int",min:1})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Robustheit Lookahead (Tage) DDP",name:"robustnessLookaheadDaysDdp",children:e.jsx(u,{mode:"int",min:1})})})]}),e.jsx(N,{level:5,style:{marginTop:4},children:"SKU Planung (Simulation)"}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Planungshorizont",name:"skuPlanningHorizonMonths",rules:[{required:!0}],children:e.jsx(D,{options:we})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"ABC-Klassen",name:"skuPlanningAbcFilter",rules:[{required:!0}],children:e.jsx(D,{options:ze})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Max. Phantom-FO Vorschlaege je SKU",name:"skuPlanningMaxPhantomSuggestionsPerSku",children:e.jsx(u,{mode:"int",min:1})})})]}),e.jsx(h,{gutter:16,children:e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{name:"skuPlanningShowSimulationByDefault",valuePropName:"checked",children:e.jsx(ye,{children:"Simulation standardmaessig anzeigen"})})})}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Default Zollsatz %",name:"dutyRatePct",children:e.jsx(u,{mode:"percent",min:0,max:100})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Default EUSt %",name:"eustRatePct",children:e.jsx(u,{mode:"percent",min:0,max:100})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{name:"defaultDdp",valuePropName:"checked",style:{marginTop:30},children:e.jsx(ye,{children:"Default DDP aktiv"})})})]}),e.jsx(N,{level:5,style:{marginTop:4},children:"Fälligkeit Defaults FO (Auto-Zahlungen)"}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO Freight Trigger",name:"foFreightDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO Freight Offset (Tage)",name:"foFreightDueOffsetDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO Duty Trigger",name:"foDutyDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO Duty Offset (Tage)",name:"foDutyDueOffsetDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO EUSt Trigger",name:"foEustDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO EUSt Offset (Tage)",name:"foEustDueOffsetDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO EUSt Refund Trigger",name:"foEustRefundDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO EUSt Refund Offset (Tage)",name:"foEustRefundDueOffsetDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsx(N,{level:5,style:{marginTop:4},children:"Fälligkeit Defaults PO (Auto-Zahlungen)"}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO Freight Anchor",name:"poFreightDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:v})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO Freight Offset (Tage)",name:"poFreightDueLagDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO Duty Anchor",name:"poDutyDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:v})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO Duty Offset (Tage)",name:"poDutyDueLagDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO EUSt Anchor",name:"poEustDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:v})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO EUSt Offset (Tage)",name:"poEustDueLagDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO VAT Refund Anchor",name:"poVatRefundDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:v})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO VAT Refund Offset (Tage)",name:"poVatRefundDueLagDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"CNY Start",name:"cnyStart",children:e.jsx(j,{type:"date"})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"CNY Ende",name:"cnyEnd",children:e.jsx(j,{type:"date"})})})]})]})}),e.jsxs(V,{children:[e.jsx(N,{level:4,children:"Team Anzeige-Namen"}),e.jsx(pe,{children:"Hinterlege optionale Vornamen pro E-Mail. Diese Namen werden in Live-Presence und Modal-Hinweisen angezeigt."}),e.jsxs(J,{style:{marginBottom:12},wrap:!0,children:[e.jsx(j,{value:le,onChange:n=>de(n.target.value),placeholder:"E-Mail",style:{width:280}}),e.jsx(j,{value:ce,onChange:n=>me(n.target.value),placeholder:"Anzeigename (z. B. Pierre)",style:{width:220}}),e.jsx(F,{onClick:()=>{he(le,ce).then(()=>{de(""),me("")})},children:"Speichern"})]}),e.jsx(xe,{data:Re,columns:Ae,minTableWidth:880,tableLayout:"auto"})]}),e.jsxs(V,{children:[e.jsx(N,{level:4,children:"Produktkategorien"}),e.jsxs(J,{style:{marginBottom:12},children:[e.jsx(j,{value:U,onChange:n=>q(n.target.value),placeholder:"Neue Kategorie",style:{width:260}}),e.jsx(F,{onClick:()=>{Te()},children:"Hinzufuegen"})]}),e.jsx(xe,{data:Ee,columns:Me})]}),e.jsxs(V,{children:[e.jsx(N,{level:4,children:"Data Health"}),te.length?e.jsxs(J,{direction:"vertical",size:6,children:[e.jsxs(ee,{color:"orange",children:[te.length," Issues"]}),te.slice(0,10).map(n=>e.jsx(je,{children:n.message},n.id))]}):e.jsx(je,{type:"secondary",children:"Keine Issues gefunden."})]}),e.jsx(ae,{title:"Kategorie bearbeiten",open:!!O,onCancel:()=>k(null),onOk:()=>{M.validateFields().then(n=>Pe(n)).catch(()=>{})},children:e.jsxs(r,{form:M,layout:"vertical",children:[e.jsx(r.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Name ist erforderlich."}],children:e.jsx(j,{})}),e.jsx(r.Item,{name:"sortOrder",label:"Sortierung",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})]})}),e.jsx(ae,{title:"Anzeigename bearbeiten",open:!!K,onCancel:()=>R(null),onOk:()=>{E.validateFields().then(n=>{he(n.email,n.displayName).then(()=>{R(null),E.resetFields()})}).catch(()=>{})},children:e.jsxs(r,{form:E,layout:"vertical",children:[e.jsx(r.Item,{name:"email",label:"E-Mail",rules:[{required:!0,message:"E-Mail fehlt."}],children:e.jsx(j,{disabled:!0})}),e.jsx(r.Item,{name:"displayName",label:"Anzeigename",rules:[{required:!0,message:"Anzeigename fehlt."}],children:e.jsx(j,{placeholder:"z. B. Pierre"})})]})})]})}export{Ze as default};
