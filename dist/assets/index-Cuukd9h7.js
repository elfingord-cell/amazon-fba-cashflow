import{ab as Me,a5 as r,t as f,ad as ne,bl as $,v as ke,k as e,S as X,N as I,a6 as re,V as L,K as Oe,L as J,M as fe,R as h,U as a,a7 as E}from"./index-o-D_rC2a.js";import{D as u}from"./DeNumberInput-czRHznbw.js";import{D as De}from"./DataTable-Bmr5ONUk.js";import{u as Ce,C as V}from"./workspace-CYYiY6ES.js";import{S as D}from"./index-CPjrUd6P.js";import{C as xe}from"./index-DS8YiSJw.js";import"./index-CyWWOfYr.js";import"./DownOutlined-CXkcgpir.js";import"./Dropdown-BL05MYkh.js";import"./useBubbleLock-Bq7y8b-t.js";const{Paragraph:ye,Text:pe,Title:P}=Oe,Fe=["EUR","USD","CNY"],Ie=[{value:"START",label:"Start (1. Tag)"},{value:"MID",label:"Mitte (15. Tag)"},{value:"END",label:"Ende (letzter Tag)"}],H=[{value:"ORDER_DATE",label:"ORDER_DATE"},{value:"PRODUCTION_END",label:"PRODUCTION_END"},{value:"ETD",label:"ETD"},{value:"ETA",label:"ETA"},{value:"DELIVERY",label:"DELIVERY"}],_=[{value:"ORDER_DATE",label:"ORDER_DATE"},{value:"PROD_DONE",label:"PROD_DONE"},{value:"ETD",label:"ETD"},{value:"ETA",label:"ETA"}],Le=[{value:6,label:"6 Monate"},{value:12,label:"12 Monate"},{value:18,label:"18 Monate"}],we=[{value:"abc",label:"A + B + C"},{value:"ab",label:"Nur A + B"},{value:"a",label:"Nur A"}];function m(t,d){const l=Number(t);return Number.isFinite(l)?l:d}function x(t,d){return Math.round(m(t,d))}function v(t,d){const l=String(t||"").trim().toUpperCase();return H.some(b=>b.value===l)?l:d}function Y(t,d){const l=String(t||"").trim().toUpperCase();return _.some(b=>b.value===l)?l:d}function oe(t,d=12){const l=Math.round(Number(t||0));return l===6||l===12||l===18?l:d}function ie(t,d="abc"){const l=String(t||"").trim().toLowerCase();return l==="a"||l==="ab"||l==="abc"?l:d}function U(t){if(t==null||t==="")return null;const d=Number(t);return Number.isFinite(d)?d:null}function se(t){if(!Number.isFinite(t))return null;const d=Number(t);return d<=0?null:1/d}function je(t){const d=t.transportLeadTimesDays||{},l=t.cny||{},b=t.paymentDueDefaults||{},G=b.fo||{},S=b.po||{},z=U(t.fxRate),N=U(t.eurUsdRate)??se(z),p=Math.max(0,x(t.freightLagDays,0)),A=(T,C,F)=>{const y=G[T]||{};return{trigger:v(y.triggerEvent,C),offsetDays:x(y.offsetDays,F)}},M=(T,C,F)=>{const y=S[T]||{};return{anchor:Y(y.anchor,C),lagDays:x(y.lagDays,F)}},W=A("freight","ETD",0),Z=A("duty","ETA",0),B=A("eust","ETA",0),q=A("eustRefund","ETA",0),k=M("freight","ETA",p),O=M("duty","ETA",p),R=M("eust","ETA",p),j=M("vatRefund","ETA",0);return{air:Math.max(0,m(d.air,10)),rail:Math.max(0,m(d.rail,25)),sea:Math.max(0,m(d.sea,45)),defaultBufferDays:Math.max(0,m(t.defaultBufferDays,0)),defaultCurrency:String(t.defaultCurrency||"EUR"),fxRate:z,eurUsdRate:N,defaultProductionLeadTimeDays:Math.max(0,m(t.defaultProductionLeadTimeDays,45)),dutyRatePct:Math.max(0,m(t.dutyRatePct,0)),eustRatePct:Math.max(0,m(t.eustRatePct,0)),defaultDdp:t.defaultDdp===!0,safetyStockDohDefault:Math.max(0,m(t.safetyStockDohDefault,60)),robustnessLookaheadDaysNonDdp:Math.max(1,m(t.robustnessLookaheadDaysNonDdp,90)),robustnessLookaheadDaysDdp:Math.max(1,m(t.robustnessLookaheadDaysDdp,35)),foCoverageDohDefault:Math.max(0,m(t.foCoverageDohDefault,90)),moqDefaultUnits:Math.max(0,Math.round(m(t.moqDefaultUnits,500))),foRecommendationRoundupCartonBlock:Math.max(1,Math.round(m(t.foRecommendationRoundupCartonBlock,10))),foRecommendationRoundupMaxPct:Math.max(0,m(t.foRecommendationRoundupMaxPct,10)),skuPlanningHorizonMonths:oe(t.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:ie(t.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(m(t.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:t.skuPlanningShowSimulationByDefault!==!1,monthAnchorDay:String(t.monthAnchorDay||"START"),cnyStart:String(l.start||""),cnyEnd:String(l.end||""),foFreightDueTrigger:W.trigger,foFreightDueOffsetDays:W.offsetDays,foDutyDueTrigger:Z.trigger,foDutyDueOffsetDays:Z.offsetDays,foEustDueTrigger:B.trigger,foEustDueOffsetDays:B.offsetDays,foEustRefundDueTrigger:q.trigger,foEustRefundDueOffsetDays:q.offsetDays,poFreightDueAnchor:k.anchor,poFreightDueLagDays:k.lagDays,poDutyDueAnchor:O.anchor,poDutyDueLagDays:O.lagDays,poEustDueAnchor:R.anchor,poEustDueLagDays:R.lagDays,poVatRefundDueAnchor:j.anchor,poVatRefundDueLagDays:j.lagDays}}function w(){return new Date().toISOString()}function Ue(t){return`${t}-${Math.random().toString(36).slice(2,9)}`}function ae(t){return JSON.stringify({air:Number(t.air||0),rail:Number(t.rail||0),sea:Number(t.sea||0),defaultBufferDays:Number(t.defaultBufferDays||0),defaultCurrency:String(t.defaultCurrency||""),fxRate:U(t.fxRate),eurUsdRate:U(t.eurUsdRate),defaultProductionLeadTimeDays:Number(t.defaultProductionLeadTimeDays||0),dutyRatePct:Number(t.dutyRatePct||0),eustRatePct:Number(t.eustRatePct||0),defaultDdp:t.defaultDdp===!0,safetyStockDohDefault:Number(t.safetyStockDohDefault||0),robustnessLookaheadDaysNonDdp:Number(t.robustnessLookaheadDaysNonDdp||0),robustnessLookaheadDaysDdp:Number(t.robustnessLookaheadDaysDdp||0),foCoverageDohDefault:Number(t.foCoverageDohDefault||0),moqDefaultUnits:Number(t.moqDefaultUnits||0),foRecommendationRoundupCartonBlock:Number(t.foRecommendationRoundupCartonBlock||0),foRecommendationRoundupMaxPct:Number(t.foRecommendationRoundupMaxPct||0),skuPlanningHorizonMonths:oe(t.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:ie(t.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(m(t.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:t.skuPlanningShowSimulationByDefault===!0,monthAnchorDay:String(t.monthAnchorDay||""),cnyStart:String(t.cnyStart||""),cnyEnd:String(t.cnyEnd||""),foFreightDueTrigger:String(t.foFreightDueTrigger||""),foFreightDueOffsetDays:Number(t.foFreightDueOffsetDays||0),foDutyDueTrigger:String(t.foDutyDueTrigger||""),foDutyDueOffsetDays:Number(t.foDutyDueOffsetDays||0),foEustDueTrigger:String(t.foEustDueTrigger||""),foEustDueOffsetDays:Number(t.foEustDueOffsetDays||0),foEustRefundDueTrigger:String(t.foEustRefundDueTrigger||""),foEustRefundDueOffsetDays:Number(t.foEustRefundDueOffsetDays||0),poFreightDueAnchor:String(t.poFreightDueAnchor||""),poFreightDueLagDays:Number(t.poFreightDueLagDays||0),poDutyDueAnchor:String(t.poDutyDueAnchor||""),poDutyDueLagDays:Number(t.poDutyDueLagDays||0),poEustDueAnchor:String(t.poEustDueAnchor||""),poEustDueLagDays:Number(t.poEustDueLagDays||0),poVatRefundDueAnchor:String(t.poVatRefundDueAnchor||""),poVatRefundDueLagDays:Number(t.poVatRefundDueLagDays||0)})}function ze(t){return t instanceof HTMLElement?!!(t.matches("input:not([type='hidden']), textarea, [contenteditable='true']")||t.closest(".ant-select, .ant-picker, .ant-input-number")):!1}function Ze(){const{state:t,loading:d,saving:l,error:b,lastSavedAt:G,saveWith:S}=Ce(),z=Me(),N=t.settings||{},[p]=r.useForm(),A=r.useWatch("fxRate",p),M=f.useMemo(()=>se(U(A)),[A]),[W,Z]=f.useState(()=>je(N)),[B,q]=f.useState(""),[k,O]=f.useState(null),[R]=r.useForm(),j=f.useRef(null),T=f.useRef(""),[C,F]=f.useState(""),[y]=r.useForm(),[be,Q]=f.useState(null),[ue,le]=f.useState(""),[de,ce]=f.useState("");f.useEffect(()=>{const n=je(N);Z(n),p.setFieldsValue(n),T.current=ae(n)},[p,N]),f.useEffect(()=>()=>{j.current!=null&&(window.clearTimeout(j.current),j.current=null)},[]);const Se=f.useMemo(()=>{const n=Array.isArray(t.productCategories)?t.productCategories:[],c=Array.isArray(t.products)?t.products:[],o=new Map;return c.forEach(s=>{const i=String(s.categoryId||"");o.set(i,(o.get(i)||0)+1)}),n.map(s=>{const i=s;return{id:String(i.id||""),name:String(i.name||""),sortOrder:m(i.sortOrder,0),productCount:o.get(String(i.id||""))||0}}).sort((s,i)=>s.sortOrder-i.sortOrder||s.name.localeCompare(i.name))},[t.productCategories,t.products]),Ee=f.useMemo(()=>{const n=ne(N),c=Object.entries(n).map(([s,i])=>({email:s,displayName:i})),o=$(z.email);return o&&!c.some(s=>$(s.email)===o)&&c.push({email:o,displayName:""}),c.sort((s,i)=>s.email.localeCompare(i.email))},[N,z.email]),ee=f.useMemo(()=>ke({settings:t.settings,products:t.products,suppliers:t.suppliers,pos:t.pos,fos:t.fos}).issues||[],[t.settings,t.products,t.suppliers,t.pos,t.fos]),Re=f.useMemo(()=>[{header:"Name",accessorKey:"name"},{header:"Sortierung",accessorKey:"sortOrder"},{header:"Produkte",accessorKey:"productCount"},{header:"Aktionen",cell:({row:n})=>e.jsxs(X,{children:[e.jsx(I,{size:"small",onClick:()=>{O(n.original),R.setFieldsValue({name:n.original.name,sortOrder:n.original.sortOrder})},children:"Bearbeiten"}),e.jsx(I,{size:"small",danger:!0,onClick:()=>{re.confirm({title:"Kategorie loeschen?",content:"Produkte dieser Kategorie werden auf 'ohne Kategorie' gesetzt.",onOk:async()=>{await S(c=>{const o=L(c);return o.productCategories=(Array.isArray(o.productCategories)?o.productCategories:[]).filter(s=>String(s.id||"")!==n.original.id),o.products=(Array.isArray(o.products)?o.products:[]).map(s=>{const i=s;return String(i.categoryId||"")!==n.original.id?i:{...i,categoryId:null}}),o},"v2:settings:category-delete")}})},children:"Loeschen"})]})}],[R,S]);async function Ne(n,c="v2:settings:save"){if(n.cnyStart&&!n.cnyEnd||!n.cnyStart&&n.cnyEnd)throw new Error("Bitte CNY Start und Ende gemeinsam setzen.");if(n.cnyStart&&n.cnyEnd&&n.cnyStart>n.cnyEnd)throw new Error("CNY Start darf nicht nach dem Ende liegen.");const o=U(n.fxRate),s=se(o);await S(i=>{const g=L(i),K=g.settings||{};return g.settings={...K,transportLeadTimesDays:{...K.transportLeadTimesDays||{},air:Math.max(0,Math.round(n.air)),rail:Math.max(0,Math.round(n.rail)),sea:Math.max(0,Math.round(n.sea))},defaultBufferDays:Math.max(0,Math.round(n.defaultBufferDays)),defaultCurrency:n.defaultCurrency,fxRate:o,eurUsdRate:s,defaultProductionLeadTimeDays:Math.max(0,Math.round(n.defaultProductionLeadTimeDays)),dutyRatePct:Math.max(0,Number(n.dutyRatePct||0)),eustRatePct:Math.max(0,Number(n.eustRatePct||0)),defaultDdp:n.defaultDdp===!0,safetyStockDohDefault:Math.max(0,Math.round(n.safetyStockDohDefault)),robustnessLookaheadDaysNonDdp:Math.max(1,Math.round(n.robustnessLookaheadDaysNonDdp)),robustnessLookaheadDaysDdp:Math.max(1,Math.round(n.robustnessLookaheadDaysDdp)),foCoverageDohDefault:Math.max(0,Math.round(n.foCoverageDohDefault)),moqDefaultUnits:Math.max(0,Math.round(n.moqDefaultUnits)),foRecommendationRoundupCartonBlock:Math.max(1,Math.round(n.foRecommendationRoundupCartonBlock)),foRecommendationRoundupMaxPct:Math.max(0,Number(n.foRecommendationRoundupMaxPct||0)),skuPlanningHorizonMonths:oe(n.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:ie(n.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(m(n.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:n.skuPlanningShowSimulationByDefault===!0,monthAnchorDay:n.monthAnchorDay,cny:{start:n.cnyStart||"",end:n.cnyEnd||""},paymentDueDefaults:{fo:{freight:{triggerEvent:v(n.foFreightDueTrigger,"ETD"),offsetDays:x(n.foFreightDueOffsetDays,0)},duty:{triggerEvent:v(n.foDutyDueTrigger,"ETA"),offsetDays:x(n.foDutyDueOffsetDays,0)},eust:{triggerEvent:v(n.foEustDueTrigger,"ETA"),offsetDays:x(n.foEustDueOffsetDays,0)},eustRefund:{triggerEvent:v(n.foEustRefundDueTrigger,"ETA"),offsetDays:x(n.foEustRefundDueOffsetDays,0)}},po:{freight:{anchor:Y(n.poFreightDueAnchor,"ETA"),lagDays:x(n.poFreightDueLagDays,0)},duty:{anchor:Y(n.poDutyDueAnchor,"ETA"),lagDays:x(n.poDutyDueLagDays,0)},eust:{anchor:Y(n.poEustDueAnchor,"ETA"),lagDays:x(n.poEustDueLagDays,0)},vatRefund:{anchor:Y(n.poVatRefundDueAnchor,"ETA"),lagDays:x(n.poVatRefundDueLagDays,0)}}},freightLagDays:x(n.poFreightDueLagDays,0),lastUpdatedAt:w()},g},c),T.current=ae(n),F(`Gespeichert: ${new Date().toLocaleTimeString("de-DE")}`)}function te(n=420){j.current!=null&&window.clearTimeout(j.current),j.current=window.setTimeout(()=>{if(j.current=null,l){te();return}const c=p.getFieldsValue(!0);ae(c)!==T.current&&p.validateFields().then(s=>Ne(s,"v2:settings:auto")).catch(()=>{})},Math.max(80,Number(n)||420))}async function me(n,c){const o=$(n),s=String(c||"").trim();if(!o||!s)throw new Error("Bitte E-Mail und Anzeigenamen setzen.");await S(i=>{const g=L(i),K=g.settings||{},ge=ne(K);return ge[o]=s,g.settings={...K,collaborationDisplayNames:ge,lastUpdatedAt:w()},g},"v2:settings:collaboration-name-upsert")}async function he(n){const c=$(n);c&&await S(o=>{const s=L(o),i=s.settings||{},g=ne(i);return g[c]&&(delete g[c],s.settings={...i,collaborationDisplayNames:g,lastUpdatedAt:w()}),s},"v2:settings:collaboration-name-remove")}const Ae=f.useMemo(()=>[{header:"E-Mail",accessorKey:"email",meta:{width:320}},{header:"Anzeigename",accessorKey:"displayName",meta:{width:210},cell:({row:n})=>n.original.displayName||"—"},{header:"Aktionen",meta:{width:190},cell:({row:n})=>e.jsxs("div",{className:"v2-actions-nowrap",children:[e.jsx(I,{size:"small",onClick:()=>{Q(n.original.email),y.setFieldsValue({email:n.original.email,displayName:n.original.displayName})},children:"Bearbeiten"}),e.jsx(I,{size:"small",danger:!0,disabled:!n.original.displayName,onClick:()=>{he(n.original.email)},children:"Loeschen"})]})}],[y,he]);async function Te(){const n=B.trim();n&&(await S(c=>{const o=L(c),s=Array.isArray(o.productCategories)?[...o.productCategories]:[];if(s.some(g=>String(g.name||"").trim().toLowerCase()===n.toLowerCase()))throw new Error("Kategorie existiert bereits.");return s.push({id:Ue("cat"),name:n,sortOrder:s.length,createdAt:w(),updatedAt:w()}),o.productCategories=s,o},"v2:settings:category-add"),q(""))}async function Pe(n){if(!k)return;const c=n.name.trim();c&&(await S(o=>{const s=L(o);return s.productCategories=(Array.isArray(s.productCategories)?s.productCategories:[]).map(i=>{const g=i;return String(g.id||"")!==k.id?g:{...g,name:c,sortOrder:Math.max(0,Math.round(n.sortOrder||0)),updatedAt:w()}}),s},"v2:settings:category-update"),O(null),R.resetFields())}return e.jsxs("div",{className:"v2-page",children:[e.jsxs(V,{className:"v2-intro-card",children:[e.jsx("div",{className:"v2-page-head",children:e.jsxs("div",{children:[e.jsx(P,{level:3,children:"Settings"}),e.jsx(ye,{children:"Lead Times, Defaults, CNY-Fenster und Kategorien für die operative Planung."})]})}),e.jsx("div",{className:"v2-toolbar",children:e.jsxs("div",{className:"v2-toolbar-row",children:[l?e.jsx(J,{color:"processing",children:"Speichern..."}):null,G?e.jsxs(J,{color:"green",children:["Gespeichert: ",new Date(G).toLocaleTimeString("de-DE")]}):null,C?e.jsx(J,{color:"blue",children:C}):null]})})]}),b?e.jsx(fe,{type:"error",showIcon:!0,message:b}):null,d?e.jsx(fe,{type:"info",showIcon:!0,message:"Workspace wird geladen..."}):null,e.jsx(V,{children:e.jsxs(r,{name:"v2-settings-form",form:p,layout:"vertical",initialValues:W,onValuesChange:()=>{F("Ungespeicherte Aenderungen"),te(360)},onBlurCapture:n=>{ze(n.target)&&te(120)},children:[e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Air (Tage)",name:"air",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Rail (Tage)",name:"rail",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Sea (Tage)",name:"sea",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Buffer Days",name:"defaultBufferDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Default Currency",name:"defaultCurrency",rules:[{required:!0}],children:e.jsx(D,{options:Fe.map(n=>({value:n,label:n}))})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Monats-Anker",name:"monthAnchorDay",rules:[{required:!0}],children:e.jsx(D,{options:Ie})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"FX Kurs (USD je EUR)",name:"fxRate",children:e.jsx(u,{mode:"fx",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"FX Kurs (EUR je USD)",extra:"Automatisch aus USD je EUR berechnet.",children:e.jsx(u,{mode:"fx",min:0,value:M??void 0,disabled:!0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"MOQ Default (Units)",name:"moqDefaultUnits",children:e.jsx(u,{mode:"int",min:0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Safety Stock DOH",name:"safetyStockDohDefault",children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"FO Coverage DOH",name:"foCoverageDohDefault",children:e.jsx(u,{mode:"int",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Default Production Lead Time (Tage)",name:"defaultProductionLeadTimeDays",children:e.jsx(u,{mode:"int",min:0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Roundup Karton-Block",name:"foRecommendationRoundupCartonBlock",extra:"Zusatz-Aufrundung in Kartonschritten (z.B. 10 Kartons).",children:e.jsx(u,{mode:"int",min:1})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Roundup Max %",name:"foRecommendationRoundupMaxPct",extra:"Zusatz-Aufrundung nur, wenn der relative Aufschlag <= diesem Wert ist.",children:e.jsx(u,{mode:"decimal",min:0})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Info",extra:"Roundup wirkt zusaetzlich zur Rundung auf volle Kartons (SKU Units pro Karton).",children:e.jsx(E,{value:"Kartonpflicht + Block/%-Regel",readOnly:!0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Robustheit Lookahead (Tage) Standard",name:"robustnessLookaheadDaysNonDdp",children:e.jsx(u,{mode:"int",min:1})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Robustheit Lookahead (Tage) DDP",name:"robustnessLookaheadDaysDdp",children:e.jsx(u,{mode:"int",min:1})})})]}),e.jsx(P,{level:5,style:{marginTop:4},children:"SKU Planung (Simulation)"}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Planungshorizont",name:"skuPlanningHorizonMonths",rules:[{required:!0}],children:e.jsx(D,{options:Le})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"ABC-Klassen",name:"skuPlanningAbcFilter",rules:[{required:!0}],children:e.jsx(D,{options:we})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Max. Phantom-FO Vorschlaege je SKU",name:"skuPlanningMaxPhantomSuggestionsPerSku",children:e.jsx(u,{mode:"int",min:1})})})]}),e.jsx(h,{gutter:16,children:e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{name:"skuPlanningShowSimulationByDefault",valuePropName:"checked",children:e.jsx(xe,{children:"Simulation standardmaessig anzeigen"})})})}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Default Zollsatz %",name:"dutyRatePct",children:e.jsx(u,{mode:"percent",min:0,max:100})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"Default EUSt %",name:"eustRatePct",children:e.jsx(u,{mode:"percent",min:0,max:100})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{name:"defaultDdp",valuePropName:"checked",style:{marginTop:30},children:e.jsx(xe,{children:"Default DDP aktiv"})})})]}),e.jsx(P,{level:5,style:{marginTop:4},children:"Fälligkeit Defaults FO (Auto-Zahlungen)"}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO Freight Trigger",name:"foFreightDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:H})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO Freight Offset (Tage)",name:"foFreightDueOffsetDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO Duty Trigger",name:"foDutyDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:H})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO Duty Offset (Tage)",name:"foDutyDueOffsetDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO EUSt Trigger",name:"foEustDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:H})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO EUSt Offset (Tage)",name:"foEustDueOffsetDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO EUSt Refund Trigger",name:"foEustRefundDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:H})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"FO EUSt Refund Offset (Tage)",name:"foEustRefundDueOffsetDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsx(P,{level:5,style:{marginTop:4},children:"Fälligkeit Defaults PO (Auto-Zahlungen)"}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO Freight Anchor",name:"poFreightDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO Freight Offset (Tage)",name:"poFreightDueLagDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO Duty Anchor",name:"poDutyDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO Duty Offset (Tage)",name:"poDutyDueLagDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO EUSt Anchor",name:"poEustDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO EUSt Offset (Tage)",name:"poEustDueLagDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO VAT Refund Anchor",name:"poVatRefundDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(a,{xs:24,md:12,children:e.jsx(r.Item,{label:"PO VAT Refund Offset (Tage)",name:"poVatRefundDueLagDays",rules:[{required:!0}],children:e.jsx(u,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"CNY Start",name:"cnyStart",children:e.jsx(E,{type:"date"})})}),e.jsx(a,{xs:24,md:8,children:e.jsx(r.Item,{label:"CNY Ende",name:"cnyEnd",children:e.jsx(E,{type:"date"})})})]})]})}),e.jsxs(V,{children:[e.jsx(P,{level:4,children:"Team Anzeige-Namen"}),e.jsx(ye,{children:"Hinterlege optionale Vornamen pro E-Mail. Diese Namen werden in Live-Presence und Modal-Hinweisen angezeigt."}),e.jsxs(X,{style:{marginBottom:12},wrap:!0,children:[e.jsx(E,{value:ue,onChange:n=>le(n.target.value),placeholder:"E-Mail",style:{width:280}}),e.jsx(E,{value:de,onChange:n=>ce(n.target.value),placeholder:"Anzeigename (z. B. Pierre)",style:{width:220}}),e.jsx(I,{onClick:()=>{me(ue,de).then(()=>{le(""),ce("")})},children:"Speichern"})]}),e.jsx(De,{data:Ee,columns:Ae,minTableWidth:880,tableLayout:"auto"})]}),e.jsxs(V,{children:[e.jsx(P,{level:4,children:"Produktkategorien"}),e.jsxs(X,{style:{marginBottom:12},children:[e.jsx(E,{value:B,onChange:n=>q(n.target.value),placeholder:"Neue Kategorie",style:{width:260}}),e.jsx(I,{onClick:()=>{Te()},children:"Hinzufuegen"})]}),e.jsx(De,{data:Se,columns:Re})]}),e.jsxs(V,{children:[e.jsx(P,{level:4,children:"Data Health"}),ee.length?e.jsxs(X,{direction:"vertical",size:6,children:[e.jsxs(J,{color:"orange",children:[ee.length," Issues"]}),ee.slice(0,10).map(n=>e.jsx(pe,{children:n.message},n.id))]}):e.jsx(pe,{type:"secondary",children:"Keine Issues gefunden."})]}),e.jsx(re,{title:"Kategorie bearbeiten",open:!!k,onCancel:()=>O(null),onOk:()=>{R.validateFields().then(n=>Pe(n)).catch(()=>{})},children:e.jsxs(r,{form:R,layout:"vertical",children:[e.jsx(r.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Name ist erforderlich."}],children:e.jsx(E,{})}),e.jsx(r.Item,{name:"sortOrder",label:"Sortierung",rules:[{required:!0}],children:e.jsx(u,{mode:"int",min:0})})]})}),e.jsx(re,{title:"Anzeigename bearbeiten",open:!!be,onCancel:()=>Q(null),onOk:()=>{y.validateFields().then(n=>{me(n.email,n.displayName).then(()=>{Q(null),y.resetFields()})}).catch(()=>{})},children:e.jsxs(r,{form:y,layout:"vertical",children:[e.jsx(r.Item,{name:"email",label:"E-Mail",rules:[{required:!0,message:"E-Mail fehlt."}],children:e.jsx(E,{disabled:!0})}),e.jsx(r.Item,{name:"displayName",label:"Anzeigename",rules:[{required:!0,message:"Anzeigename fehlt."}],children:e.jsx(E,{placeholder:"z. B. Pierre"})})]})})]})}export{Ze as default};
