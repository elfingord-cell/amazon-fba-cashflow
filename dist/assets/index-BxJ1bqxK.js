import{ac as Oe,a6 as n,t as g,ae as re,bk as $,v as Me,k as e,S as J,M as I,a7 as ne,V as w,J as Ce,N as Q,I as fe,R as h,Q as s,U as A}from"./index-BX0hCHd9.js";import{D as c}from"./DeNumberInput-BKhnEnVS.js";import{T as De}from"./TanStackGrid-BGkv20_p.js";import{u as ke,C as H}from"./workspace-C5RCXX1l.js";import{S as D}from"./index-DzJjwXuy.js";import{C as xe}from"./index-D7NwOxsn.js";import"./index-DVmxEQnU.js";import"./Dropdown-Dqfaj-V1.js";import"./useBubbleLock-J8y-aVQh.js";const{Paragraph:ye,Text:pe,Title:R}=Ce,Fe=["EUR","USD","CNY"],Ie=[{value:"START",label:"Start (1. Tag)"},{value:"MID",label:"Mitte (15. Tag)"},{value:"END",label:"Ende (letzter Tag)"}],v=[{value:"ORDER_DATE",label:"ORDER_DATE"},{value:"PRODUCTION_END",label:"PRODUCTION_END"},{value:"ETD",label:"ETD"},{value:"ETA",label:"ETA"},{value:"DELIVERY",label:"DELIVERY"}],_=[{value:"ORDER_DATE",label:"ORDER_DATE"},{value:"PROD_DONE",label:"PROD_DONE"},{value:"ETD",label:"ETD"},{value:"ETA",label:"ETA"}],we=[{value:6,label:"6 Monate"},{value:12,label:"12 Monate"},{value:18,label:"18 Monate"}],Le=[{value:"abc",label:"A + B + C"},{value:"ab",label:"Nur A + B"},{value:"a",label:"Nur A"}];function f(t,l){const u=Number(t);return Number.isFinite(u)?u:l}function x(t,l){return Math.round(f(t,l))}function K(t,l){const u=String(t||"").trim().toUpperCase();return v.some(S=>S.value===u)?u:l}function Y(t,l){const u=String(t||"").trim().toUpperCase();return _.some(S=>S.value===u)?u:l}function ie(t,l=12){const u=Math.round(Number(t||0));return u===6||u===12||u===18?u:l}function oe(t,l="abc"){const u=String(t||"").trim().toLowerCase();return u==="a"||u==="ab"||u==="abc"?u:l}function U(t){if(t==null||t==="")return null;const l=Number(t);return Number.isFinite(l)?l:null}function se(t){if(!Number.isFinite(t))return null;const l=Number(t);return l<=0?null:1/l}function je(t){const l=t.transportLeadTimesDays||{},u=t.cny||{},S=t.paymentDueDefaults||{},G=S.fo||{},b=S.po||{},z=U(t.fxRate),T=U(t.eurUsdRate)??se(z),p=Math.max(0,x(t.freightLagDays,0)),N=(P,k,F)=>{const y=G[P]||{};return{trigger:K(y.triggerEvent,k),offsetDays:x(y.offsetDays,F)}},O=(P,k,F)=>{const y=b[P]||{};return{anchor:Y(y.anchor,k),lagDays:x(y.lagDays,F)}},W=N("freight","ETD",0),Z=N("duty","ETA",0),q=N("eust","ETA",0),B=N("eustRefund","ETA",0),M=O("freight","ETA",p),C=O("duty","ETA",p),E=O("eust","ETA",p),j=O("vatRefund","ETA",0);return{air:Math.max(0,f(l.air,10)),rail:Math.max(0,f(l.rail,25)),sea:Math.max(0,f(l.sea,45)),defaultBufferDays:Math.max(0,f(t.defaultBufferDays,0)),defaultCurrency:String(t.defaultCurrency||"EUR"),fxRate:z,eurUsdRate:T,defaultProductionLeadTimeDays:Math.max(0,f(t.defaultProductionLeadTimeDays,45)),dutyRatePct:Math.max(0,f(t.dutyRatePct,0)),eustRatePct:Math.max(0,f(t.eustRatePct,0)),defaultDdp:t.defaultDdp===!0,safetyStockDohDefault:Math.max(0,f(t.safetyStockDohDefault,60)),foCoverageDohDefault:Math.max(0,f(t.foCoverageDohDefault,90)),moqDefaultUnits:Math.max(0,Math.round(f(t.moqDefaultUnits,500))),skuPlanningHorizonMonths:ie(t.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:oe(t.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(f(t.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:t.skuPlanningShowSimulationByDefault!==!1,monthAnchorDay:String(t.monthAnchorDay||"START"),cnyStart:String(u.start||""),cnyEnd:String(u.end||""),foFreightDueTrigger:W.trigger,foFreightDueOffsetDays:W.offsetDays,foDutyDueTrigger:Z.trigger,foDutyDueOffsetDays:Z.offsetDays,foEustDueTrigger:q.trigger,foEustDueOffsetDays:q.offsetDays,foEustRefundDueTrigger:B.trigger,foEustRefundDueOffsetDays:B.offsetDays,poFreightDueAnchor:M.anchor,poFreightDueLagDays:M.lagDays,poDutyDueAnchor:C.anchor,poDutyDueLagDays:C.lagDays,poEustDueAnchor:E.anchor,poEustDueLagDays:E.lagDays,poVatRefundDueAnchor:j.anchor,poVatRefundDueLagDays:j.lagDays}}function L(){return new Date().toISOString()}function Ue(t){return`${t}-${Math.random().toString(36).slice(2,9)}`}function ae(t){return JSON.stringify({air:Number(t.air||0),rail:Number(t.rail||0),sea:Number(t.sea||0),defaultBufferDays:Number(t.defaultBufferDays||0),defaultCurrency:String(t.defaultCurrency||""),fxRate:U(t.fxRate),eurUsdRate:U(t.eurUsdRate),defaultProductionLeadTimeDays:Number(t.defaultProductionLeadTimeDays||0),dutyRatePct:Number(t.dutyRatePct||0),eustRatePct:Number(t.eustRatePct||0),defaultDdp:t.defaultDdp===!0,safetyStockDohDefault:Number(t.safetyStockDohDefault||0),foCoverageDohDefault:Number(t.foCoverageDohDefault||0),moqDefaultUnits:Number(t.moqDefaultUnits||0),skuPlanningHorizonMonths:ie(t.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:oe(t.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(f(t.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:t.skuPlanningShowSimulationByDefault===!0,monthAnchorDay:String(t.monthAnchorDay||""),cnyStart:String(t.cnyStart||""),cnyEnd:String(t.cnyEnd||""),foFreightDueTrigger:String(t.foFreightDueTrigger||""),foFreightDueOffsetDays:Number(t.foFreightDueOffsetDays||0),foDutyDueTrigger:String(t.foDutyDueTrigger||""),foDutyDueOffsetDays:Number(t.foDutyDueOffsetDays||0),foEustDueTrigger:String(t.foEustDueTrigger||""),foEustDueOffsetDays:Number(t.foEustDueOffsetDays||0),foEustRefundDueTrigger:String(t.foEustRefundDueTrigger||""),foEustRefundDueOffsetDays:Number(t.foEustRefundDueOffsetDays||0),poFreightDueAnchor:String(t.poFreightDueAnchor||""),poFreightDueLagDays:Number(t.poFreightDueLagDays||0),poDutyDueAnchor:String(t.poDutyDueAnchor||""),poDutyDueLagDays:Number(t.poDutyDueLagDays||0),poEustDueAnchor:String(t.poEustDueAnchor||""),poEustDueLagDays:Number(t.poEustDueLagDays||0),poVatRefundDueAnchor:String(t.poVatRefundDueAnchor||""),poVatRefundDueLagDays:Number(t.poVatRefundDueLagDays||0)})}function ze(t){return t instanceof HTMLElement?!!(t.matches("input:not([type='hidden']), textarea, [contenteditable='true']")||t.closest(".ant-select, .ant-picker, .ant-input-number")):!1}function We(){const{state:t,loading:l,saving:u,error:S,lastSavedAt:G,saveWith:b}=ke(),z=Oe(),T=t.settings||{},[p]=n.useForm(),N=n.useWatch("fxRate",p),O=g.useMemo(()=>se(U(N)),[N]),[W,Z]=g.useState(()=>je(T)),[q,B]=g.useState(""),[M,C]=g.useState(null),[E]=n.useForm(),j=g.useRef(null),P=g.useRef(""),[k,F]=g.useState(""),[y]=n.useForm(),[Se,X]=g.useState(null),[ue,le]=g.useState(""),[de,ce]=g.useState("");g.useEffect(()=>{const r=je(T);Z(r),p.setFieldsValue(r),P.current=ae(r)},[p,T]),g.useEffect(()=>()=>{j.current!=null&&(window.clearTimeout(j.current),j.current=null)},[]);const be=g.useMemo(()=>{const r=Array.isArray(t.productCategories)?t.productCategories:[],d=Array.isArray(t.products)?t.products:[],i=new Map;return d.forEach(a=>{const o=String(a.categoryId||"");i.set(o,(i.get(o)||0)+1)}),r.map(a=>{const o=a;return{id:String(o.id||""),name:String(o.name||""),sortOrder:f(o.sortOrder,0),productCount:i.get(String(o.id||""))||0}}).sort((a,o)=>a.sortOrder-o.sortOrder||a.name.localeCompare(o.name))},[t.productCategories,t.products]),Ee=g.useMemo(()=>{const r=re(T),d=Object.entries(r).map(([a,o])=>({email:a,displayName:o})),i=$(z.email);return i&&!d.some(a=>$(a.email)===i)&&d.push({email:i,displayName:""}),d.sort((a,o)=>a.email.localeCompare(o.email))},[T,z.email]),ee=g.useMemo(()=>Me({settings:t.settings,products:t.products,suppliers:t.suppliers,pos:t.pos,fos:t.fos}).issues||[],[t.settings,t.products,t.suppliers,t.pos,t.fos]),Ae=g.useMemo(()=>[{header:"Name",accessorKey:"name"},{header:"Sortierung",accessorKey:"sortOrder"},{header:"Produkte",accessorKey:"productCount"},{header:"Aktionen",cell:({row:r})=>e.jsxs(J,{children:[e.jsx(I,{size:"small",onClick:()=>{C(r.original),E.setFieldsValue({name:r.original.name,sortOrder:r.original.sortOrder})},children:"Bearbeiten"}),e.jsx(I,{size:"small",danger:!0,onClick:()=>{ne.confirm({title:"Kategorie loeschen?",content:"Produkte dieser Kategorie werden auf 'ohne Kategorie' gesetzt.",onOk:async()=>{await b(d=>{const i=w(d);return i.productCategories=(Array.isArray(i.productCategories)?i.productCategories:[]).filter(a=>String(a.id||"")!==r.original.id),i.products=(Array.isArray(i.products)?i.products:[]).map(a=>{const o=a;return String(o.categoryId||"")!==r.original.id?o:{...o,categoryId:null}}),i},"v2:settings:category-delete")}})},children:"Loeschen"})]})}],[E,b]);async function Te(r,d="v2:settings:save"){if(r.cnyStart&&!r.cnyEnd||!r.cnyStart&&r.cnyEnd)throw new Error("Bitte CNY Start und Ende gemeinsam setzen.");if(r.cnyStart&&r.cnyEnd&&r.cnyStart>r.cnyEnd)throw new Error("CNY Start darf nicht nach dem Ende liegen.");const i=U(r.fxRate),a=se(i);await b(o=>{const m=w(o),V=m.settings||{};return m.settings={...V,transportLeadTimesDays:{...V.transportLeadTimesDays||{},air:Math.max(0,Math.round(r.air)),rail:Math.max(0,Math.round(r.rail)),sea:Math.max(0,Math.round(r.sea))},defaultBufferDays:Math.max(0,Math.round(r.defaultBufferDays)),defaultCurrency:r.defaultCurrency,fxRate:i,eurUsdRate:a,defaultProductionLeadTimeDays:Math.max(0,Math.round(r.defaultProductionLeadTimeDays)),dutyRatePct:Math.max(0,Number(r.dutyRatePct||0)),eustRatePct:Math.max(0,Number(r.eustRatePct||0)),defaultDdp:r.defaultDdp===!0,safetyStockDohDefault:Math.max(0,Math.round(r.safetyStockDohDefault)),foCoverageDohDefault:Math.max(0,Math.round(r.foCoverageDohDefault)),moqDefaultUnits:Math.max(0,Math.round(r.moqDefaultUnits)),skuPlanningHorizonMonths:ie(r.skuPlanningHorizonMonths,12),skuPlanningAbcFilter:oe(r.skuPlanningAbcFilter,"abc"),skuPlanningMaxPhantomSuggestionsPerSku:Math.max(1,Math.round(f(r.skuPlanningMaxPhantomSuggestionsPerSku,3))),skuPlanningShowSimulationByDefault:r.skuPlanningShowSimulationByDefault===!0,monthAnchorDay:r.monthAnchorDay,cny:{start:r.cnyStart||"",end:r.cnyEnd||""},paymentDueDefaults:{fo:{freight:{triggerEvent:K(r.foFreightDueTrigger,"ETD"),offsetDays:x(r.foFreightDueOffsetDays,0)},duty:{triggerEvent:K(r.foDutyDueTrigger,"ETA"),offsetDays:x(r.foDutyDueOffsetDays,0)},eust:{triggerEvent:K(r.foEustDueTrigger,"ETA"),offsetDays:x(r.foEustDueOffsetDays,0)},eustRefund:{triggerEvent:K(r.foEustRefundDueTrigger,"ETA"),offsetDays:x(r.foEustRefundDueOffsetDays,0)}},po:{freight:{anchor:Y(r.poFreightDueAnchor,"ETA"),lagDays:x(r.poFreightDueLagDays,0)},duty:{anchor:Y(r.poDutyDueAnchor,"ETA"),lagDays:x(r.poDutyDueLagDays,0)},eust:{anchor:Y(r.poEustDueAnchor,"ETA"),lagDays:x(r.poEustDueLagDays,0)},vatRefund:{anchor:Y(r.poVatRefundDueAnchor,"ETA"),lagDays:x(r.poVatRefundDueLagDays,0)}}},freightLagDays:x(r.poFreightDueLagDays,0),lastUpdatedAt:L()},m},d),P.current=ae(r),F(`Gespeichert: ${new Date().toLocaleTimeString("de-DE")}`)}function te(r=420){j.current!=null&&window.clearTimeout(j.current),j.current=window.setTimeout(()=>{if(j.current=null,u){te();return}const d=p.getFieldsValue(!0);ae(d)!==P.current&&p.validateFields().then(a=>Te(a,"v2:settings:auto")).catch(()=>{})},Math.max(80,Number(r)||420))}async function me(r,d){const i=$(r),a=String(d||"").trim();if(!i||!a)throw new Error("Bitte E-Mail und Anzeigenamen setzen.");await b(o=>{const m=w(o),V=m.settings||{},he=re(V);return he[i]=a,m.settings={...V,collaborationDisplayNames:he,lastUpdatedAt:L()},m},"v2:settings:collaboration-name-upsert")}async function ge(r){const d=$(r);d&&await b(i=>{const a=w(i),o=a.settings||{},m=re(o);return m[d]&&(delete m[d],a.settings={...o,collaborationDisplayNames:m,lastUpdatedAt:L()}),a},"v2:settings:collaboration-name-remove")}const Ne=g.useMemo(()=>[{header:"E-Mail",accessorKey:"email",meta:{width:320}},{header:"Anzeigename",accessorKey:"displayName",meta:{width:210},cell:({row:r})=>r.original.displayName||"—"},{header:"Aktionen",meta:{width:190},cell:({row:r})=>e.jsxs("div",{className:"v2-actions-nowrap",children:[e.jsx(I,{size:"small",onClick:()=>{X(r.original.email),y.setFieldsValue({email:r.original.email,displayName:r.original.displayName})},children:"Bearbeiten"}),e.jsx(I,{size:"small",danger:!0,disabled:!r.original.displayName,onClick:()=>{ge(r.original.email)},children:"Loeschen"})]})}],[y,ge]);async function Pe(){const r=q.trim();r&&(await b(d=>{const i=w(d),a=Array.isArray(i.productCategories)?[...i.productCategories]:[];if(a.some(m=>String(m.name||"").trim().toLowerCase()===r.toLowerCase()))throw new Error("Kategorie existiert bereits.");return a.push({id:Ue("cat"),name:r,sortOrder:a.length,createdAt:L(),updatedAt:L()}),i.productCategories=a,i},"v2:settings:category-add"),B(""))}async function Re(r){if(!M)return;const d=r.name.trim();d&&(await b(i=>{const a=w(i);return a.productCategories=(Array.isArray(a.productCategories)?a.productCategories:[]).map(o=>{const m=o;return String(m.id||"")!==M.id?m:{...m,name:d,sortOrder:Math.max(0,Math.round(r.sortOrder||0)),updatedAt:L()}}),a},"v2:settings:category-update"),C(null),E.resetFields())}return e.jsxs("div",{className:"v2-page",children:[e.jsxs(H,{className:"v2-intro-card",children:[e.jsx("div",{className:"v2-page-head",children:e.jsxs("div",{children:[e.jsx(R,{level:3,children:"Settings"}),e.jsx(ye,{children:"Lead Times, Defaults, CNY-Fenster und Kategorien für die operative Planung."})]})}),e.jsx("div",{className:"v2-toolbar",children:e.jsxs("div",{className:"v2-toolbar-row",children:[u?e.jsx(Q,{color:"processing",children:"Speichern..."}):null,G?e.jsxs(Q,{color:"green",children:["Gespeichert: ",new Date(G).toLocaleTimeString("de-DE")]}):null,k?e.jsx(Q,{color:"blue",children:k}):null]})})]}),S?e.jsx(fe,{type:"error",showIcon:!0,message:S}):null,l?e.jsx(fe,{type:"info",showIcon:!0,message:"Workspace wird geladen..."}):null,e.jsx(H,{children:e.jsxs(n,{name:"v2-settings-form",form:p,layout:"vertical",initialValues:W,onValuesChange:()=>{F("Ungespeicherte Aenderungen"),te(360)},onBlurCapture:r=>{ze(r.target)&&te(120)},children:[e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Air (Tage)",name:"air",rules:[{required:!0}],children:e.jsx(c,{mode:"int",min:0})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Rail (Tage)",name:"rail",rules:[{required:!0}],children:e.jsx(c,{mode:"int",min:0})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Sea (Tage)",name:"sea",rules:[{required:!0}],children:e.jsx(c,{mode:"int",min:0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Buffer Days",name:"defaultBufferDays",rules:[{required:!0}],children:e.jsx(c,{mode:"int",min:0})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Default Currency",name:"defaultCurrency",rules:[{required:!0}],children:e.jsx(D,{options:Fe.map(r=>({value:r,label:r}))})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Monats-Anker",name:"monthAnchorDay",rules:[{required:!0}],children:e.jsx(D,{options:Ie})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"FX Kurs (USD je EUR)",name:"fxRate",children:e.jsx(c,{mode:"fx",min:0})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"FX Kurs (EUR je USD)",extra:"Automatisch aus USD je EUR berechnet.",children:e.jsx(c,{mode:"fx",min:0,value:O??void 0,disabled:!0})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"MOQ Default (Units)",name:"moqDefaultUnits",children:e.jsx(c,{mode:"int",min:0})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Safety Stock DOH",name:"safetyStockDohDefault",children:e.jsx(c,{mode:"int",min:0})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"FO Coverage DOH",name:"foCoverageDohDefault",children:e.jsx(c,{mode:"int",min:0})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Default Production Lead Time (Tage)",name:"defaultProductionLeadTimeDays",children:e.jsx(c,{mode:"int",min:0})})})]}),e.jsx(R,{level:5,style:{marginTop:4},children:"SKU Planung (Simulation)"}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Planungshorizont",name:"skuPlanningHorizonMonths",rules:[{required:!0}],children:e.jsx(D,{options:we})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"ABC-Klassen",name:"skuPlanningAbcFilter",rules:[{required:!0}],children:e.jsx(D,{options:Le})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Max. Phantom-FO Vorschlaege je SKU",name:"skuPlanningMaxPhantomSuggestionsPerSku",children:e.jsx(c,{mode:"int",min:1})})})]}),e.jsx(h,{gutter:16,children:e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{name:"skuPlanningShowSimulationByDefault",valuePropName:"checked",children:e.jsx(xe,{children:"Simulation standardmaessig anzeigen"})})})}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Default Zollsatz %",name:"dutyRatePct",children:e.jsx(c,{mode:"percent",min:0,max:100})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"Default EUSt %",name:"eustRatePct",children:e.jsx(c,{mode:"percent",min:0,max:100})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{name:"defaultDdp",valuePropName:"checked",style:{marginTop:30},children:e.jsx(xe,{children:"Default DDP aktiv"})})})]}),e.jsx(R,{level:5,style:{marginTop:4},children:"Fälligkeit Defaults FO (Auto-Zahlungen)"}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO Freight Trigger",name:"foFreightDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:v})})}),e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO Freight Offset (Tage)",name:"foFreightDueOffsetDays",rules:[{required:!0}],children:e.jsx(c,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO Duty Trigger",name:"foDutyDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:v})})}),e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO Duty Offset (Tage)",name:"foDutyDueOffsetDays",rules:[{required:!0}],children:e.jsx(c,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO EUSt Trigger",name:"foEustDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:v})})}),e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO EUSt Offset (Tage)",name:"foEustDueOffsetDays",rules:[{required:!0}],children:e.jsx(c,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO EUSt Refund Trigger",name:"foEustRefundDueTrigger",rules:[{required:!0}],children:e.jsx(D,{options:v})})}),e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"FO EUSt Refund Offset (Tage)",name:"foEustRefundDueOffsetDays",rules:[{required:!0}],children:e.jsx(c,{mode:"int"})})})]}),e.jsx(R,{level:5,style:{marginTop:4},children:"Fälligkeit Defaults PO (Auto-Zahlungen)"}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO Freight Anchor",name:"poFreightDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO Freight Offset (Tage)",name:"poFreightDueLagDays",rules:[{required:!0}],children:e.jsx(c,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO Duty Anchor",name:"poDutyDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO Duty Offset (Tage)",name:"poDutyDueLagDays",rules:[{required:!0}],children:e.jsx(c,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO EUSt Anchor",name:"poEustDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO EUSt Offset (Tage)",name:"poEustDueLagDays",rules:[{required:!0}],children:e.jsx(c,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO VAT Refund Anchor",name:"poVatRefundDueAnchor",rules:[{required:!0}],children:e.jsx(D,{options:_})})}),e.jsx(s,{xs:24,md:12,children:e.jsx(n.Item,{label:"PO VAT Refund Offset (Tage)",name:"poVatRefundDueLagDays",rules:[{required:!0}],children:e.jsx(c,{mode:"int"})})})]}),e.jsxs(h,{gutter:16,children:[e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"CNY Start",name:"cnyStart",children:e.jsx(A,{type:"date"})})}),e.jsx(s,{xs:24,md:8,children:e.jsx(n.Item,{label:"CNY Ende",name:"cnyEnd",children:e.jsx(A,{type:"date"})})})]})]})}),e.jsxs(H,{children:[e.jsx(R,{level:4,children:"Team Anzeige-Namen"}),e.jsx(ye,{children:"Hinterlege optionale Vornamen pro E-Mail. Diese Namen werden in Live-Presence und Modal-Hinweisen angezeigt."}),e.jsxs(J,{style:{marginBottom:12},wrap:!0,children:[e.jsx(A,{value:ue,onChange:r=>le(r.target.value),placeholder:"E-Mail",style:{width:280}}),e.jsx(A,{value:de,onChange:r=>ce(r.target.value),placeholder:"Anzeigename (z. B. Pierre)",style:{width:220}}),e.jsx(I,{onClick:()=>{me(ue,de).then(()=>{le(""),ce("")})},children:"Speichern"})]}),e.jsx(De,{data:Ee,columns:Ne,minTableWidth:880,tableLayout:"auto"})]}),e.jsxs(H,{children:[e.jsx(R,{level:4,children:"Produktkategorien"}),e.jsxs(J,{style:{marginBottom:12},children:[e.jsx(A,{value:q,onChange:r=>B(r.target.value),placeholder:"Neue Kategorie",style:{width:260}}),e.jsx(I,{onClick:()=>{Pe()},children:"Hinzufuegen"})]}),e.jsx(De,{data:be,columns:Ae})]}),e.jsxs(H,{children:[e.jsx(R,{level:4,children:"Data Health"}),ee.length?e.jsxs(J,{direction:"vertical",size:6,children:[e.jsxs(Q,{color:"orange",children:[ee.length," Issues"]}),ee.slice(0,10).map(r=>e.jsx(pe,{children:r.message},r.id))]}):e.jsx(pe,{type:"secondary",children:"Keine Issues gefunden."})]}),e.jsx(ne,{title:"Kategorie bearbeiten",open:!!M,onCancel:()=>C(null),onOk:()=>{E.validateFields().then(r=>Re(r)).catch(()=>{})},children:e.jsxs(n,{form:E,layout:"vertical",children:[e.jsx(n.Item,{name:"name",label:"Name",rules:[{required:!0,message:"Name ist erforderlich."}],children:e.jsx(A,{})}),e.jsx(n.Item,{name:"sortOrder",label:"Sortierung",rules:[{required:!0}],children:e.jsx(c,{mode:"int",min:0})})]})}),e.jsx(ne,{title:"Anzeigename bearbeiten",open:!!Se,onCancel:()=>X(null),onOk:()=>{y.validateFields().then(r=>{me(r.email,r.displayName).then(()=>{X(null),y.resetFields()})}).catch(()=>{})},children:e.jsxs(n,{form:y,layout:"vertical",children:[e.jsx(n.Item,{name:"email",label:"E-Mail",rules:[{required:!0,message:"E-Mail fehlt."}],children:e.jsx(A,{disabled:!0})}),e.jsx(n.Item,{name:"displayName",label:"Anzeigename",rules:[{required:!0,message:"Anzeigename fehlt."}],children:e.jsx(A,{placeholder:"z. B. Pierre"})})]})})]})}export{We as default};
