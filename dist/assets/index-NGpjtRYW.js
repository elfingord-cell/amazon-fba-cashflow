const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/debug-B9GOcQXa.js","assets/index-Dsq1NbgA.js","assets/index-DUX27Ch7.css","assets/store-CXiTZ7hZ.js","assets/orderEditorFactory-KGCDnAAZ.js","assets/prefill-DkcozMsR.js","assets/productCompleteness-CNODPsSo.js","assets/costing-CmZrILJ2.js","assets/dateUtils-D7NmXfd-.js","assets/shipping-9Dzo5wwm.js","assets/deepEqual-CGWqzo0t.js","assets/useDraftForm-cJuiQ9tm.js","assets/abcClassification-DMTDJ3gR.js"])))=>i.map(i=>d[i]);
import{t as o,k as e,W as T,a0 as f,X as E,V as v,Y as C,a3 as S,br as W,cD as K}from"./index-Dsq1NbgA.js";import{b as P}from"./abcClassification-DMTDJ3gR.js";import{d as _,e as F}from"./store-CXiTZ7hZ.js";import{u as U,C as b}from"./workspace-DYbhLcOY.js";import{s as O}from"./index-g5ZP9IP1.js";import{S as V}from"./index-D7DbeJV5.js";import"./Dropdown-BjfOTMXt.js";import"./DownOutlined-QrMw0MBW.js";const{Paragraph:A,Text:r,Title:D}=T;function H(t){return String(t||"").trim().toLowerCase()}function R(t){return["pos","fos","incomings","extras","fixcosts","dividends","products"].some(n=>Array.isArray(t[n])&&t[n].length>0)}function y(t,c=2){const n=Number(t);return Number.isFinite(n)?n.toLocaleString("de-DE",{minimumFractionDigits:c,maximumFractionDigits:c}):"-"}function ee(){const{state:t,loading:c,saving:n,error:k,saveWith:m}=U(),[h,M]=O.useMessage(),[a,g]=o.useState(""),[x,p]=o.useState(null),j=t,d=F(),z=_(),l=o.useMemo(()=>(Array.isArray(t.products)?t.products:[]).map(i=>String((i||{}).sku||"").trim()).filter(Boolean),[t.products]);o.useEffect(()=>{if(!l.length){g("");return}(!a||!l.includes(a))&&g(l[0])},[a,l]);const u=o.useMemo(()=>P(j),[t]),s=o.useMemo(()=>a&&u.bySku.get(H(a))||null,[u.bySku,a]);async function B(){const i=S(structuredClone(j));if(R(j)){if(!window.confirm("Daten vorhanden - ueberschreiben?"))return;p(i)}else p(null);const w=await W(()=>import("./debug-B9GOcQXa.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]));await m(()=>S(w.buildDemoState()),"v2:debug:seed"),h.success("Testdaten wurden geladen.")}async function L(){window.confirm("Wirklich alle Daten loeschen?")&&(await m(()=>K(),"v2:debug:wipe"),h.success("Alle Daten wurden zurueckgesetzt."))}async function N(){x&&(await m(()=>S(x),"v2:debug:undo"),p(null),h.success("Letzter Seed wurde rueckgaengig gemacht."))}return e.jsxs("div",{className:"v2-page",children:[M,e.jsxs(b,{className:"v2-intro-card",children:[e.jsx("div",{className:"v2-page-head",children:e.jsxs("div",{children:[e.jsx(D,{level:3,children:"Debug / Werkzeuge"}),e.jsx(A,{children:"Hilfsfunktionen zum schnellen Befuellen, Zuruecksetzen und Pruefen der ABC-Klassifizierung."})]})}),e.jsx("div",{className:"v2-toolbar",children:e.jsxs("div",{className:"v2-toolbar-row",children:[e.jsx(f,{onClick:()=>{B()},loading:n,children:"Testdaten & POs laden"}),e.jsx(f,{danger:!0,onClick:()=>{L()},loading:n,children:"Alle Daten loeschen"}),e.jsx(f,{onClick:()=>{N()},disabled:!x,loading:n,children:"Letzten Seed rueckgaengig"}),e.jsxs(E,{color:"blue",children:["Drafts (lokal): ",z]})]})}),e.jsxs(v,{direction:"vertical",size:2,style:{marginTop:12},children:[e.jsxs(r,{children:["Storage-Key: ",e.jsx("strong",{children:d.storageKey})]}),e.jsxs(r,{children:["Last Commit: ",e.jsx("strong",{children:d.lastCommitAt||"-"})]}),e.jsxs(r,{style:{maxWidth:960},children:["Last Commit Meta:"," ",e.jsx("strong",{children:d.lastCommitMeta?JSON.stringify(d.lastCommitMeta):"-"})]})]})]}),k?e.jsx(C,{type:"error",showIcon:!0,message:k}):null,c?e.jsx(C,{type:"info",showIcon:!0,message:"Workspace wird geladen..."}):null,e.jsxs(b,{children:[e.jsx(D,{level:4,children:"ABC Debug"}),e.jsx(A,{type:"secondary",children:"Kontrolle der ABC-Berechnung auf Basis Forecast der naechsten 6 Monate."}),e.jsxs(v,{wrap:!0,align:"start",children:[e.jsxs("div",{children:[e.jsx(r,{children:"SKU"}),e.jsx(V,{value:a||void 0,onChange:i=>g(i),placeholder:"SKU waehlen",style:{width:280},options:l.map(i=>({label:i,value:i}))})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Forecast-Monate"}),e.jsx("div",{children:u.months.length?u.months.join(", "):"-"})]})]}),e.jsxs(v,{direction:"vertical",style:{marginTop:14},children:[e.jsxs(r,{children:["VK-Preis (Brutto): ",e.jsx("strong",{children:y(s==null?void 0:s.vkPriceGross,2)})]}),e.jsxs(r,{children:["Forecast Units (6M): ",e.jsx("strong",{children:y(s==null?void 0:s.units6m,0)})]}),e.jsxs(r,{children:["Umsatz 6M: ",e.jsx("strong",{children:y(s==null?void 0:s.revenue6m,2)})]}),e.jsxs(r,{children:["ABC: ",e.jsx("strong",{children:(s==null?void 0:s.abcClass)||"-"})]}),e.jsxs(r,{children:["Aktiv: ",e.jsx("strong",{children:s!=null&&s.active?"ja":"nein"})]})]})]})]})}export{ee as default};
