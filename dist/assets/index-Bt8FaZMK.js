const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dsq1NbgA.js","assets/index-DUX27Ch7.css"])))=>i.map(i=>d[i]);
import{a4 as Te,ar as Re,at as Fe,aF as j,ac as De,aJ as Le,t as g,ab as V,aN as A,a6 as ve,aA as at,$ as $e,c9 as lt,aO as Ce,cc as ct,cS as Me,Z as We,cd as dt,p as ut,cD as je,a3 as R,br as mt,cC as pt,k as s,W as Ee,V as H,Y as D,a0 as de,X as ue,cT as gt}from"./index-Dsq1NbgA.js";import{d as ft}from"./deepEqual-CGWqzo0t.js";import{D as ht}from"./DataTable-BVxiVDsF.js";import{C as L,u as yt,T as xt}from"./workspace-DYbhLcOY.js";import{S as ae}from"./index-DFAHVshx.js";import{D as bt}from"./index-D7DbeJV5.js";import{P as $t}from"./Pagination-C71sWMmV.js";import{R as xe}from"./index-DGYOOpUo.js";import{e as St}from"./cashflow-BIZjDysg.js";import{s as vt}from"./index-g5ZP9IP1.js";import"./Dropdown-BjfOTMXt.js";import"./DownOutlined-QrMw0MBW.js";import"./useBubbleLock-l6JBo3uo.js";import"./planProducts-8EK0Neth.js";const jt=e=>{const{componentCls:t}=e;return{[t]:{"&-horizontal":{[`&${t}`]:{"&-sm":{marginBlock:e.marginXS},"&-md":{marginBlock:e.margin}}}}}},Et=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:r,colorSplit:n,lineWidth:i,textPaddingInline:o,orientationMargin:d,verticalMarginInline:c}=e;return{[t]:Object.assign(Object.assign({},Fe(e)),{borderBlockStart:`${j(i)} solid ${n}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:c,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${j(i)} solid ${n}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${j(e.marginLG)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${j(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${n}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${j(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-start`]:{"&::before":{width:`calc(${d} * 100%)`},"&::after":{width:`calc(100% - ${d} * 100%)`}},[`&-horizontal${t}-with-text-end`]:{"&::before":{width:`calc(100% - ${d} * 100%)`},"&::after":{width:`calc(${d} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:o},"&-dashed":{background:"none",borderColor:n,borderStyle:"dashed",borderWidth:`${j(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:n,borderStyle:"dotted",borderWidth:`${j(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-start${t}-no-default-orientation-margin-start`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:r}},[`&-horizontal${t}-with-text-end${t}-no-default-orientation-margin-end`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:r}}})}},wt=e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),It=Te("Divider",e=>{const t=Re(e,{dividerHorizontalWithTextGutterMargin:e.margin,sizePaddingEdgeHorizontal:0});return[Et(t),jt(t)]},wt,{unitless:{orientationMargin:!0}});var Ot=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Nt={small:"sm",middle:"md"},zt=e=>{const{getPrefixCls:t,direction:r,className:n,style:i}=De("divider"),{prefixCls:o,type:d="horizontal",orientation:c="center",orientationMargin:l,className:a,rootClassName:u,children:p,dashed:m,variant:y="solid",plain:b,style:v,size:S}=e,N=Ot(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style","size"]),x=t("divider",o),[I,z,f]=It(x),E=Le(S),h=Nt[E],$=!!p,w=g.useMemo(()=>c==="left"?r==="rtl"?"end":"start":c==="right"?r==="rtl"?"start":"end":c,[r,c]),P=w==="start"&&l!=null,Y=w==="end"&&l!=null,Z=V(x,n,z,f,`${x}-${d}`,{[`${x}-with-text`]:$,[`${x}-with-text-${w}`]:$,[`${x}-dashed`]:!!m,[`${x}-${y}`]:y!=="solid",[`${x}-plain`]:!!b,[`${x}-rtl`]:r==="rtl",[`${x}-no-default-orientation-margin-start`]:P,[`${x}-no-default-orientation-margin-end`]:Y,[`${x}-${h}`]:!!h},a,u),K=g.useMemo(()=>typeof l=="number"?l:/^\d+$/.test(l)?Number(l):l,[l]),W={marginInlineStart:P?K:void 0,marginInlineEnd:Y?K:void 0};return I(g.createElement("div",Object.assign({className:Z,style:Object.assign(Object.assign({},i),v)},N,{role:"separator"}),p&&d!=="vertical"&&g.createElement("span",{className:`${x}-inner-text`,style:W},p)))},we=A.createContext({});we.Consumer;var _e=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Ct=e=>{var{prefixCls:t,className:r,avatar:n,title:i,description:o}=e,d=_e(e,["prefixCls","className","avatar","title","description"]);const{getPrefixCls:c}=g.useContext(ve),l=c("list",t),a=V(`${l}-item-meta`,r),u=A.createElement("div",{className:`${l}-item-meta-content`},i&&A.createElement("h4",{className:`${l}-item-meta-title`},i),o&&A.createElement("div",{className:`${l}-item-meta-description`},o));return A.createElement("div",Object.assign({},d,{className:a}),n&&A.createElement("div",{className:`${l}-item-meta-avatar`},n),(i||o)&&u)},Mt=A.forwardRef((e,t)=>{const{prefixCls:r,children:n,actions:i,extra:o,styles:d,className:c,classNames:l,colStyle:a}=e,u=_e(e,["prefixCls","children","actions","extra","styles","className","classNames","colStyle"]),{grid:p,itemLayout:m}=g.useContext(we),{getPrefixCls:y,list:b}=g.useContext(ve),v=h=>{var $,w;return V((w=($=b==null?void 0:b.item)===null||$===void 0?void 0:$.classNames)===null||w===void 0?void 0:w[h],l==null?void 0:l[h])},S=h=>{var $,w;return Object.assign(Object.assign({},(w=($=b==null?void 0:b.item)===null||$===void 0?void 0:$.styles)===null||w===void 0?void 0:w[h]),d==null?void 0:d[h])},N=()=>{let h=!1;return g.Children.forEach(n,$=>{typeof $=="string"&&(h=!0)}),h&&g.Children.count(n)>1},x=()=>m==="vertical"?!!o:!N(),I=y("list",r),z=i&&i.length>0&&A.createElement("ul",{className:V(`${I}-item-action`,v("actions")),key:"actions",style:S("actions")},i.map((h,$)=>A.createElement("li",{key:`${I}-item-action-${$}`},h,$!==i.length-1&&A.createElement("em",{className:`${I}-item-action-split`})))),f=p?"div":"li",E=A.createElement(f,Object.assign({},u,p?{}:{ref:t},{className:V(`${I}-item`,{[`${I}-item-no-flex`]:!x()},c)}),m==="vertical"&&o?[A.createElement("div",{className:`${I}-item-main`,key:"content"},n,z),A.createElement("div",{className:V(`${I}-item-extra`,v("extra")),key:"extra",style:S("extra")},o)]:[n,z,at(o,{key:"extra"})]);return p?A.createElement($e,{ref:t,flex:1,style:a},E):E}),Je=Mt;Je.Meta=Ct;const kt=e=>{const{listBorderedCls:t,componentCls:r,paddingLG:n,margin:i,itemPaddingSM:o,itemPaddingLG:d,marginLG:c,borderRadiusLG:l}=e,a=j(e.calc(l).sub(e.lineWidth).equal());return{[t]:{border:`${j(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:l,[`${r}-header`]:{borderRadius:`${a} ${a} 0 0`},[`${r}-footer`]:{borderRadius:`0 0 ${a} ${a}`},[`${r}-header,${r}-footer,${r}-item`]:{paddingInline:n},[`${r}-pagination`]:{margin:`${j(i)} ${j(c)}`}},[`${t}${r}-sm`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:o}},[`${t}${r}-lg`]:{[`${r}-item,${r}-header,${r}-footer`]:{padding:d}}}},At=e=>{const{componentCls:t,screenSM:r,screenMD:n,marginLG:i,marginSM:o,margin:d}=e;return{[`@media screen and (max-width:${n}px)`]:{[t]:{[`${t}-item`]:{[`${t}-item-action`]:{marginInlineStart:i}}},[`${t}-vertical`]:{[`${t}-item`]:{[`${t}-item-extra`]:{marginInlineStart:i}}}},[`@media screen and (max-width: ${r}px)`]:{[t]:{[`${t}-item`]:{flexWrap:"wrap",[`${t}-action`]:{marginInlineStart:o}}},[`${t}-vertical`]:{[`${t}-item`]:{flexWrap:"wrap-reverse",[`${t}-item-main`]:{minWidth:e.contentWidth},[`${t}-item-extra`]:{margin:`auto auto ${j(d)}`}}}}}},Pt=e=>{const{componentCls:t,antCls:r,controlHeight:n,minHeight:i,paddingSM:o,marginLG:d,padding:c,itemPadding:l,colorPrimary:a,itemPaddingSM:u,itemPaddingLG:p,paddingXS:m,margin:y,colorText:b,colorTextDescription:v,motionDurationSlow:S,lineWidth:N,headerBg:x,footerBg:I,emptyTextPadding:z,metaMarginBottom:f,avatarMarginRight:E,titleMarginBottom:h,descriptionFontSize:$}=e;return{[t]:Object.assign(Object.assign({},Fe(e)),{position:"relative","--rc-virtual-list-scrollbar-bg":e.colorSplit,"*":{outline:"none"},[`${t}-header`]:{background:x},[`${t}-footer`]:{background:I},[`${t}-header, ${t}-footer`]:{paddingBlock:o},[`${t}-pagination`]:{marginBlockStart:d,[`${r}-pagination-options`]:{textAlign:"start"}},[`${t}-spin`]:{minHeight:i,textAlign:"center"},[`${t}-items`]:{margin:0,padding:0,listStyle:"none"},[`${t}-item`]:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:l,color:b,[`${t}-item-meta`]:{display:"flex",flex:1,alignItems:"flex-start",maxWidth:"100%",[`${t}-item-meta-avatar`]:{marginInlineEnd:E},[`${t}-item-meta-content`]:{flex:"1 0",width:0,color:b},[`${t}-item-meta-title`]:{margin:`0 0 ${j(e.marginXXS)} 0`,color:b,fontSize:e.fontSize,lineHeight:e.lineHeight,"> a":{color:b,transition:`all ${S}`,"&:hover":{color:a}}},[`${t}-item-meta-description`]:{color:v,fontSize:$,lineHeight:e.lineHeight}},[`${t}-item-action`]:{flex:"0 0 auto",marginInlineStart:e.marginXXL,padding:0,fontSize:0,listStyle:"none","& > li":{position:"relative",display:"inline-block",padding:`0 ${j(m)}`,color:v,fontSize:e.fontSize,lineHeight:e.lineHeight,textAlign:"center","&:first-child":{paddingInlineStart:0}},[`${t}-item-action-split`]:{position:"absolute",insetBlockStart:"50%",insetInlineEnd:0,width:N,height:e.calc(e.fontHeight).sub(e.calc(e.marginXXS).mul(2)).equal(),transform:"translateY(-50%)",backgroundColor:e.colorSplit}}},[`${t}-empty`]:{padding:`${j(c)} 0`,color:v,fontSize:e.fontSizeSM,textAlign:"center"},[`${t}-empty-text`]:{padding:z,color:e.colorTextDisabled,fontSize:e.fontSize,textAlign:"center"},[`${t}-item-no-flex`]:{display:"block"}}),[`${t}-grid ${r}-col > ${t}-item`]:{display:"block",maxWidth:"100%",marginBlockEnd:y,paddingBlock:0,borderBlockEnd:"none"},[`${t}-vertical ${t}-item`]:{alignItems:"initial",[`${t}-item-main`]:{display:"block",flex:1},[`${t}-item-extra`]:{marginInlineStart:d},[`${t}-item-meta`]:{marginBlockEnd:f,[`${t}-item-meta-title`]:{marginBlockStart:0,marginBlockEnd:h,color:b,fontSize:e.fontSizeLG,lineHeight:e.lineHeightLG}},[`${t}-item-action`]:{marginBlockStart:c,marginInlineStart:"auto","> li":{padding:`0 ${j(c)}`,"&:first-child":{paddingInlineStart:0}}}},[`${t}-split ${t}-item`]:{borderBlockEnd:`${j(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,"&:last-child":{borderBlockEnd:"none"}},[`${t}-split ${t}-header`]:{borderBlockEnd:`${j(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-split${t}-empty ${t}-footer`]:{borderTop:`${j(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-loading ${t}-spin-nested-loading`]:{minHeight:n},[`${t}-split${t}-something-after-last-item ${r}-spin-container > ${t}-items > ${t}-item:last-child`]:{borderBlockEnd:`${j(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},[`${t}-lg ${t}-item`]:{padding:p},[`${t}-sm ${t}-item`]:{padding:u},[`${t}:not(${t}-vertical)`]:{[`${t}-item-no-flex`]:{[`${t}-item-action`]:{float:"right"}}}}},Bt=e=>({contentWidth:220,itemPadding:`${j(e.paddingContentVertical)} 0`,itemPaddingSM:`${j(e.paddingContentVerticalSM)} ${j(e.paddingContentHorizontal)}`,itemPaddingLG:`${j(e.paddingContentVerticalLG)} ${j(e.paddingContentHorizontalLG)}`,headerBg:"transparent",footerBg:"transparent",emptyTextPadding:e.padding,metaMarginBottom:e.padding,avatarMarginRight:e.padding,titleMarginBottom:e.paddingSM,descriptionFontSize:e.fontSize}),Tt=Te("List",e=>{const t=Re(e,{listBorderedCls:`${e.componentCls}-bordered`,minHeight:e.controlHeightLG});return[Pt(t),kt(t),At(t)]},Bt);var Rt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};function Ft(e,t){const{pagination:r=!1,prefixCls:n,bordered:i=!1,split:o=!0,className:d,rootClassName:c,style:l,children:a,itemLayout:u,loadMore:p,grid:m,dataSource:y=[],size:b,header:v,footer:S,loading:N=!1,rowKey:x,renderItem:I,locale:z}=e,f=Rt(e,["pagination","prefixCls","bordered","split","className","rootClassName","style","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),E=r&&typeof r=="object"?r:{},[h,$]=g.useState(E.defaultCurrent||1),[w,P]=g.useState(E.defaultPageSize||10),{getPrefixCls:Y,direction:Z,className:K,style:W}=De("list"),{renderEmpty:ee}=g.useContext(ve),Ue={current:1,total:0,position:"bottom"},Oe=O=>(B,_)=>{var ye;$(B),P(_),r&&((ye=r==null?void 0:r[O])===null||ye===void 0||ye.call(r,B,_))},Ke=Oe("onChange"),Xe=Oe("onShowSizeChange"),Qe=(O,B)=>{if(!I)return null;let _;return typeof x=="function"?_=x(O):x?_=O[x]:_=O.key,_||(_=`list-item-${B}`),g.createElement(g.Fragment,{key:_},I(O,B))},qe=!!(p||r||S),M=Y("list",n),[Ye,Ze,et]=Tt(M);let G=N;typeof G=="boolean"&&(G={spinning:G});const ge=!!(G!=null&&G.spinning),tt=Le(b);let ie="";switch(tt){case"large":ie="lg";break;case"small":ie="sm";break}const nt=V(M,{[`${M}-vertical`]:u==="vertical",[`${M}-${ie}`]:ie,[`${M}-split`]:o,[`${M}-bordered`]:i,[`${M}-loading`]:ge,[`${M}-grid`]:!!m,[`${M}-something-after-last-item`]:qe,[`${M}-rtl`]:Z==="rtl"},K,d,c,Ze,et),T=lt(Ue,{total:y.length,current:h,pageSize:w},r||{}),rt=Math.ceil(T.total/T.pageSize);T.current=Math.min(T.current,rt);const Ne=r&&g.createElement("div",{className:V(`${M}-pagination`)},g.createElement($t,Object.assign({align:"end"},T,{onChange:Ke,onShowSizeChange:Xe})));let fe=Ce(y);r&&y.length>(T.current-1)*T.pageSize&&(fe=Ce(y).splice((T.current-1)*T.pageSize,T.pageSize));const it=Object.keys(m||{}).some(O=>["xs","sm","md","lg","xl","xxl"].includes(O)),ze=ct(it),oe=g.useMemo(()=>{for(let O=0;O<Me.length;O+=1){const B=Me[O];if(ze[B])return B}},[ze]),ot=g.useMemo(()=>{if(!m)return;const O=oe&&m[oe]?m[oe]:m.column;if(O)return{width:`${100/O}%`,maxWidth:`${100/O}%`}},[JSON.stringify(m),oe]);let he=ge&&g.createElement("div",{style:{minHeight:53}});if(fe.length>0){const O=fe.map(Qe);he=m?g.createElement(We,{gutter:m.gutter},g.Children.map(O,B=>g.createElement("div",{key:B==null?void 0:B.key,style:ot},B))):g.createElement("ul",{className:`${M}-items`},O)}else!a&&!ge&&(he=g.createElement("div",{className:`${M}-empty-text`},(z==null?void 0:z.emptyText)||(ee==null?void 0:ee("List"))||g.createElement(bt,{componentName:"List"})));const se=T.position,st=g.useMemo(()=>({grid:m,itemLayout:u}),[JSON.stringify(m),u]);return Ye(g.createElement(we.Provider,{value:st},g.createElement("div",Object.assign({ref:t,style:Object.assign(Object.assign({},W),l),className:nt},f),(se==="top"||se==="both")&&Ne,v&&g.createElement("div",{className:`${M}-header`},v),g.createElement(dt,Object.assign({},G),he,a),S&&g.createElement("div",{className:`${M}-footer`},S),p||(se==="bottom"||se==="both")&&Ne)))}const Dt=g.forwardRef(Ft),Se=Dt;Se.Item=Je;function Ie(e){if(typeof e!="string")return null;const t=e.trim();if(!t)return null;if(/^\d{4}-\d{2}$/.test(t))return t;const r=t.match(/^(\d{2})-(\d{4})$/);return r?`${r[2]}-${r[1]}`:null}function Lt(e){const t=Ie(e.month);return!t||t===e.month?{value:e,normalized:!1}:{value:{...e,month:t},normalized:!0}}function Wt(e){let t=5381;for(let r=0;r<e.length;r+=1)t=(t<<5)+t+e.charCodeAt(r),t|=0;return Math.abs(t).toString(36)}function _t(e,t){const r=t.map(n=>String(n??"")).join("|");return`${e}-${Wt(r)}`}function He(e){if(typeof e=="number")return Number.isFinite(e)?e:null;if(typeof e!="string")return null;const t=ut(e);return Number.isFinite(t)?t:null}function re(e){return JSON.parse(JSON.stringify(e))}function C(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function Q(e,t){e.push(t)}const Jt=["settings","products","suppliers","pos","fos","payments","forecast","inventory","fixcosts","monthlyActuals"];function Ht(e){if(!C(e))return"unknown";const t=Object.keys(e);return Jt.filter(n=>t.includes(n)).length>=3?"legacy_v1":"unknown"}function k(e){return{section:e,total:0,mapped:0,normalized:0,skipped:0,blocked:0}}function me(e,t,r,n){const i={};return Object.entries(e).forEach(([o,d])=>{const c=Ie(o),l=c||o;c&&c!==o&&(r.normalized+=1,Q(n,{code:"MONTH_KEY_NORMALIZED",severity:"info",entityType:t,entityId:o,message:`Monatsschluessel '${o}' wurde auf '${l}' normalisiert.`})),i[l]=d}),i}function Ve(e){let t=0,r={...e};const n=Lt(r);return n.normalized&&(t+=1,r=n.value),["units","amazonUnits","threePLUnits","projectionMonths","safetyDays","realRevenueEUR","realPayoutRatePct","realClosingBalanceEUR"].forEach(o=>{if(!(o in r))return;const d=He(r[o]);d!=null&&r[o]!==d&&(t+=1,r[o]=d)}),{value:r,normalized:t}}function F(e,t,r,n,i,o){const d=t[r],c=Array.isArray(d)?d:[];i.total=c.length;const l=[];c.forEach((a,u)=>{if(!C(a)){i.skipped+=1,Q(o,{code:"ENTRY_NOT_OBJECT",severity:"warning",entityType:r,entityId:String(u),message:"Datensatz ist kein Objekt und wurde uebersprungen."});return}if(n.requiredField&&!a[n.requiredField]){i.blocked+=1,i.skipped+=1,Q(o,{code:"MISSING_REQUIRED_FIELD",severity:"error",entityType:r,entityId:String(u),message:`Pflichtfeld '${n.requiredField}' fehlt. Datensatz wurde uebersprungen.`});return}const p=Ve(a);let m=p.value;i.normalized+=p.normalized;const y=n.idField;if(!m[y]){const b=(n.seedFields||[y,"id","sku","poNo","name"]).map(v=>m[v]);m={...m,[y]:_t(n.idPrefix,[r,u,...b])},i.normalized+=1,Q(o,{code:"ID_GENERATED",severity:"info",entityType:r,entityId:String(u),message:`Fehlende ID in '${r}' wurde deterministisch erzeugt.`})}l.push(m)}),e[r]=l,i.mapped=l.length}function Vt(e,t,r,n){const i=C(t.forecast)?re(t.forecast):{};r.total=Object.keys(i).length,C(i.forecastManual)||(i.forecastManual={}),C(i.forecastImport)||(i.forecastImport={});const o=i.forecastManual;Object.entries(o).forEach(([c,l])=>{C(l)&&(o[c]=me(l,"forecastManual",r,n))});const d=i.forecastImport;Object.entries(d).forEach(([c,l])=>{C(l)&&(d[c]=me(l,"forecastImport",r,n))}),e.forecast=i,r.mapped=1}function Gt(e,t,r,n){const i=C(t.inventory)?re(t.inventory):{snapshots:[],settings:{}},o=Array.isArray(i.snapshots)?i.snapshots:[];i.snapshots=o,r.total=o.length;const d=o.map((c,l)=>{if(!C(c))return r.skipped+=1,null;const a=re(c),u=Ie(a.month);return u&&u!==a.month&&(a.month=u,r.normalized+=1),Array.isArray(a.items)||(a.items=[]),a.items=a.items.map(p=>{if(!C(p))return null;const m=Ve(p);return r.normalized+=m.normalized,m.value.sku?m.value:(r.blocked+=1,r.skipped+=1,Q(n,{code:"MISSING_REQUIRED_FIELD",severity:"error",entityType:"inventory.snapshots.items",entityId:String(l),message:"Snapshot-Item ohne SKU wurde uebersprungen."}),null)}).filter(Boolean),a}).filter(Boolean);i.snapshots=d,e.inventory=i,r.mapped=d.length}function Ut(e,t,r,n){const i=C(t.monthlyActuals)?t.monthlyActuals:{};r.total=Object.keys(i).length;const o=me(i,"monthlyActuals",r,n);Object.entries(o).forEach(([d,c])=>{if(!C(c))return;const l={...c};["realRevenueEUR","realPayoutRatePct","realClosingBalanceEUR"].forEach(a=>{const u=He(l[a]);u!=null&&l[a]!==u&&(l[a]=u,r.normalized+=1)}),o[d]=l}),e.monthlyActuals=o,r.mapped=Object.keys(o).length}function Kt(e,t,r,n){const i=C(t.fixcostOverrides)?t.fixcostOverrides:{};r.total=Object.keys(i).length;const o={};Object.entries(i).forEach(([d,c])=>{if(!C(c)){r.skipped+=1;return}o[d]=me(c,"fixcostOverrides",r,n),r.mapped+=1}),e.fixcostOverrides=o}function Xt(e,t,r){r.total=1;const n=C(t.settings)?re(t.settings):{};e.settings=n,r.mapped=1}function Qt(e,t,r){const n=new Set(Object.keys(je()));Object.entries(t).forEach(([i,o])=>{n.has(i)||(e.legacyMeta.unmapped[i]=o,Q(r,{code:"UNMAPPED_ROOT_FIELD",severity:"info",entityType:"root",entityId:i,message:`Unbekanntes Root-Feld '${i}' wurde unter legacyMeta.unmapped abgelegt.`}))})}function qt(e){const t=Ht(e),r=je(),n=[],i=[k("settings"),k("productCategories"),k("suppliers"),k("products"),k("pos"),k("fos"),k("payments"),k("incomings"),k("extras"),k("dividends"),k("fixcosts"),k("fixcostOverrides"),k("monthlyActuals"),k("inventory"),k("forecast")];if(!C(e))return n.push({code:"INVALID_JSON_ROOT",severity:"error",entityType:"root",message:"JSON-Root ist kein Objekt."}),{sourceState:e,mappedState:r,report:{sourceVersion:t,targetVersion:"v2",sections:i,issues:n,canApply:!1}};const o=re(e);Xt(r,o,i[0]),F(r,o,"productCategories",{idPrefix:"cat",idField:"id",requiredField:"name",seedFields:["name"]},i[1],n),F(r,o,"suppliers",{idPrefix:"sup",idField:"id",seedFields:["name","company_name"]},i[2],n),F(r,o,"products",{idPrefix:"prod",idField:"id",requiredField:"sku",seedFields:["sku","alias"]},i[3],n),F(r,o,"pos",{idPrefix:"po",idField:"id",seedFields:["id","poNo","poNumber","sku"]},i[4],n),F(r,o,"fos",{idPrefix:"fo",idField:"id",seedFields:["id","foNo","sku"]},i[5],n),F(r,o,"payments",{idPrefix:"pay",idField:"id",seedFields:["id","paymentInternalId","paidDate"]},i[6],n),F(r,o,"incomings",{idPrefix:"inc",idField:"id",seedFields:["month","revenueEur"]},i[7],n),F(r,o,"extras",{idPrefix:"extra",idField:"id",seedFields:["date","label","amountEur"]},i[8],n),F(r,o,"dividends",{idPrefix:"div",idField:"id",seedFields:["date","amountEur"]},i[9],n),F(r,o,"fixcosts",{idPrefix:"fix",idField:"id",seedFields:["name","category","startMonth"]},i[10],n),Kt(r,o,i[11],n),Ut(r,o,i[12],n),Gt(r,o,i[13],n),Vt(r,o,i[14],n),Qt(r,o,n);const d=n.some(a=>a.severity==="error"&&a.entityType==="root"),c=i.reduce((a,u)=>a+u.mapped,0),l={sourceVersion:t,targetVersion:"v2",sections:i,issues:n,canApply:!d&&c>0};return{sourceState:e,mappedState:R(r),report:l}}function Yt(e){let t;try{t=JSON.parse(e)}catch{return{sourceState:null,mappedState:je(),report:{sourceVersion:"unknown",targetVersion:"v2",sections:[],issues:[{code:"INVALID_JSON",severity:"error",entityType:"root",message:"JSON konnte nicht geparst werden."}],canApply:!1}}}return qt(t)}function Ge(){return new Date().toISOString()}function pe(e){return e&&typeof e=="object"&&!Array.isArray(e)?e:{}}function ke(e,t,r){for(const n of t){const i=e[n];if(i==null)continue;const o=String(i).trim();if(o)return`${n}:${o.toLowerCase()}`}return`fallback:${r}`}function Zt(e,t,r,n,i){const o=Array.isArray(e)?e:[],d=Array.isArray(t)?t:[],c=[...o],l=new Map;return c.forEach((a,u)=>{if(!a||typeof a!="object"||Array.isArray(a))return;const p=ke(a,r,`${n}:${u}`);l.set(p,u)}),d.forEach((a,u)=>{if(!a||typeof a!="object"||Array.isArray(a))return;const p=ke(a,r,`${n}:incoming:${u}`),m=l.get(p);if(m==null){c.push(a),l.set(p,c.length-1);return}const y=c[m];ft(y,a)||i.push({code:"MERGE_CONFLICT_EXISTING_WINS",severity:"warning",entityType:n,entityId:p,message:`Konflikt in '${n}' fuer ${p}. Bestehender Datensatz wurde beibehalten.`})}),c}function X(e,t){if(Array.isArray(e)||Array.isArray(t))return e??t;const r=pe(e),n=pe(t),i={...n,...r};return Object.keys(i).forEach(o=>{const d=r[o],c=n[o];d&&c&&typeof d=="object"&&typeof c=="object"&&!Array.isArray(d)&&!Array.isArray(c)&&(i[o]=X(d,c))}),i}function en(e,t){const r=[],n=R({...t,...e});[{section:"products",keys:["sku","id"]},{section:"suppliers",keys:["id","name"]},{section:"productCategories",keys:["id","name"]},{section:"pos",keys:["id","poNo","poNumber"]},{section:"fos",keys:["id","foNo"]},{section:"payments",keys:["id","paymentInternalId"]},{section:"fixcosts",keys:["id","name"]},{section:"incomings",keys:["month","id"]},{section:"extras",keys:["id","date","label"]},{section:"dividends",keys:["id","date"]}].forEach(({section:c,keys:l})=>{n[c]=Zt(e[c],t[c],l,String(c),r)}),n.settings=X(e.settings,t.settings),n.forecast=X(e.forecast,t.forecast),n.inventory=X(e.inventory,t.inventory),n.fixcostOverrides=X(e.fixcostOverrides,t.fixcostOverrides),n.monthlyActuals=X(e.monthlyActuals,t.monthlyActuals);const o=R(e).legacyMeta,d=R(t).legacyMeta;return n.legacyMeta={importHistory:o.importHistory||[],unmapped:{...pe(d.unmapped),...pe(o.unmapped)}},n.schemaVersion=2,{next:n,issues:r}}function Ae(e,t,r){const n=R(e);return n.legacyMeta.importHistory=[{id:`import-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,appliedAt:Ge(),mode:t,sourceVersion:r},...n.legacyMeta.importHistory||[]].slice(0,30),n}function tn(e,t){return t.length?{...e,issues:[...e.issues,...t]}:e}function nn(e,t,r){if(t==="replace_workspace")return{nextState:Ae(e.mappedState,t,e.report.sourceVersion),report:e.report};const n=en(R(r),R(e.mappedState));return{nextState:Ae(n.next,t,e.report.sourceVersion),report:tn(e.report,n.issues)}}async function rn(e,t){return(await mt(()=>import("./index-Dsq1NbgA.js").then(n=>n.cV),__vite__mapDeps([0,1]))).createWorkspaceBackup(e,t)}async function on(e,t,r,n){if(!e.report.canApply)throw new Error("Dry-Run report is not applyable.");const i=await r.load(),d=await((n==null?void 0:n.createBackup)||rn)("v2:migration:pre-apply",R(i)),c=nn(e,t,R(i));return await r.save(c.nextState,{source:`v2:migration:${t}`}),{mode:t,backupId:d,report:c.report,appliedAt:Ge()}}const{Paragraph:sn,Text:te,Title:be}=Ee;function an({severity:e}){return e==="error"?s.jsx(ue,{color:"red",children:"Error"}):e==="warning"?s.jsx(ue,{color:"gold",children:"Warning"}):s.jsx(ue,{color:"blue",children:"Info"})}function ln(){return[{header:"Section",accessorKey:"section"},{header:"Total",accessorKey:"total"},{header:"Mapped",accessorKey:"mapped"},{header:"Normalized",accessorKey:"normalized"},{header:"Skipped",accessorKey:"skipped"},{header:"Blocked",accessorKey:"blocked"}]}function cn({rows:e}){const t=g.useMemo(()=>ln(),[]);return s.jsx(ht,{data:e,columns:t,minTableWidth:720,tableLayout:"auto",sorting:!1})}function dn(){const e=pt(),[t,r]=g.useState("replace_workspace"),[n,i]=g.useState(null),[o,d]=g.useState(null),[c,l]=g.useState(!1),[a,u]=g.useState(!1),[p,m]=g.useState(""),[y,b]=g.useState(""),v=(n==null?void 0:n.report.sections)||[],S=(n==null?void 0:n.report.issues)||[],N=S.some(f=>f.severity==="error"),x=v.reduce((f,E)=>f+E.mapped,0);async function I(f){l(!0),m(""),d(null);try{const E=await f.text(),h=Yt(E);i(h),b(`${f.name} · ${(f.size/1024).toFixed(1)} KB`)}catch(E){i(null),m(E instanceof Error?E.message:"Datei konnte nicht verarbeitet werden.")}finally{l(!1)}}async function z(){if(n&&n.report.canApply){u(!0),m("");try{const f=await on(n,t,e);d(f)}catch(f){m(f instanceof Error?f.message:"Import konnte nicht angewendet werden.")}finally{u(!1)}}}return s.jsxs("div",{className:"v2-import-wizard",children:[s.jsxs(L,{children:[s.jsx(be,{level:4,children:"Legacy JSON Migration Wizard"}),s.jsx(sn,{children:"Best-Effort Import mit Dry-Run-Report. Vor jedem Apply wird automatisch ein Workspace-Backup erstellt."}),s.jsxs(H,{direction:"vertical",size:16,style:{width:"100%"},children:[s.jsx("input",{type:"file",accept:".json,application/json",onChange:f=>{var h;const E=(h=f.target.files)==null?void 0:h[0];E&&I(E)}}),y?s.jsxs(te,{type:"secondary",children:["Quelle: ",y]}):null,c?s.jsx(D,{type:"info",showIcon:!0,message:"Dry-Run wird berechnet..."}):null,p?s.jsx(D,{type:"error",showIcon:!0,message:p}):null,n?s.jsx(D,{type:n.report.canApply?"success":"warning",showIcon:!0,message:`Quelle: ${n.report.sourceVersion} · Apply ${n.report.canApply?"moeglich":"nicht moeglich"}`,description:`Gemappte Datensaetze: ${x}. Fehler: ${S.filter(f=>f.severity==="error").length}.`}):null]})]}),n?s.jsxs(L,{children:[s.jsxs(H,{size:32,wrap:!0,children:[s.jsx(ae,{title:"Sections",value:v.length}),s.jsx(ae,{title:"Mapped",value:x}),s.jsx(ae,{title:"Warnings",value:S.filter(f=>f.severity==="warning").length}),s.jsx(ae,{title:"Errors",value:S.filter(f=>f.severity==="error").length})]}),s.jsx(zt,{}),s.jsx(cn,{rows:v})]}):null,S.length?s.jsxs(L,{children:[s.jsx(be,{level:5,children:"Issues"}),s.jsx(Se,{size:"small",dataSource:S,renderItem:f=>s.jsx(Se.Item,{children:s.jsxs(H,{direction:"vertical",size:0,children:[s.jsxs(H,{children:[s.jsx(an,{severity:f.severity}),s.jsx(te,{strong:!0,children:f.code}),s.jsxs(te,{type:"secondary",children:[f.entityType,f.entityId?` · ${f.entityId}`:""]})]}),s.jsx(te,{children:f.message})]})})})]}):null,n?s.jsxs(L,{children:[s.jsx(be,{level:5,children:"Apply"}),s.jsxs(H,{direction:"vertical",size:12,style:{width:"100%"},children:[s.jsxs(xe.Group,{value:t,onChange:f=>r(f.target.value),children:[s.jsx(xe,{value:"replace_workspace",children:"replace_workspace"}),s.jsx(xe,{value:"merge_upsert",children:"merge_upsert (existing wins)"})]}),s.jsx(de,{type:"primary",onClick:()=>{z()},loading:a,disabled:!n.report.canApply||N,children:"Apply Migration"}),s.jsxs(te,{type:"secondary",children:["Bei ",s.jsx("code",{children:"merge_upsert"})," bleiben bestehende Daten bei Konflikten erhalten."]})]})]}):null,o?s.jsx(L,{children:s.jsx(D,{type:"success",showIcon:!0,message:"Migration angewendet",description:`Mode: ${o.mode} · Backup: ${o.backupId} · Zeitpunkt: ${o.appliedAt}`})}):null]})}const{Paragraph:un,Text:ne,Title:le}=Ee;function q(e){const t=J(e);return t??0}function J(e){if(e==null||e==="")return 0;if(typeof e=="number")return Number.isFinite(e)?e:null;const t=String(e).trim();if(!t)return 0;const r=t.replace(/\./g,"").replace(",","."),n=Number(r);return Number.isFinite(n)?n:null}function ce(e){return q(e).toLocaleString("de-DE",{minimumFractionDigits:2,maximumFractionDigits:2})}function U(e){return/^\d{4}-\d{2}$/.test(String(e||""))}function mn(e){const t=String(e||"").trim();if(!/^\d{4}-\d{2}-\d{2}$/.test(t))return!1;const[r,n,i]=t.split("-").map(Number),o=new Date(r,n-1,i);return Number.isFinite(o.getTime())&&o.getFullYear()===r&&o.getMonth()+1===n&&o.getDate()===i}function pn(e){const t=[],r=[],n=e.settings||{};q(n.openingBalance)<0&&t.push("Opening Balance darf nicht negativ sein."),U(n.startMonth)||t.push("Startmonat fehlt oder ist ungueltig (settings.startMonth).");const o=Number(n.horizonMonths||0);(!Number.isFinite(o)||o<=0)&&t.push("Horizont fehlt oder ist ungueltig (settings.horizonMonths).");const d=J(n.cashInRecommendationBaselineNormalPct);if(d!=null&&d>=40&&d<=60||t.push("settings.cashInRecommendationBaselineNormalPct muss im Band 40..60 liegen."),n.cashInRecommendationBaselineQ4Pct!=null&&String(n.cashInRecommendationBaselineQ4Pct).trim()!==""){const l=J(n.cashInRecommendationBaselineQ4Pct);l!=null&&l>=40&&l<=60||t.push("settings.cashInRecommendationBaselineQ4Pct muss im Band 40..60 liegen.")}(Array.isArray(e.incomings)?e.incomings:[]).forEach((l,a)=>{const u=l||{};U(u.month)||t.push(`Incomings ${a+1}: Monat fehlt/ungueltig.`);const p=J(u.revenueEur);Number.isFinite(p)&&p>=0||t.push(`Incomings ${a+1}: Umsatz ungueltig.`);let m=Number(u.payoutPct||0);Number.isFinite(m)||(m=0),m>1&&(m/=100),m>=0&&m<=1||t.push(`Incomings ${a+1}: payoutPct muss 0..1 oder 0..100 sein.`);const y=String(u.month||""),b=String(u.calibrationCutoffDate||"").trim();b&&(mn(b)?U(y)&&b.slice(0,7)!==y&&t.push(`Incomings ${a+1}: calibrationCutoffDate muss im selben Monat wie row.month liegen.`):t.push(`Incomings ${a+1}: calibrationCutoffDate ungueltig (erwartet JJJJ-MM-TT).`));const v=u.calibrationRevenueToDateEur;if(v!=null&&String(v).trim()!==""){const x=J(v);Number.isFinite(x)&&x>=0||t.push(`Incomings ${a+1}: calibrationRevenueToDateEur muss numerisch und >= 0 sein.`)}const S=u.calibrationSellerboardMonthEndEur;if(S!=null&&String(S).trim()!==""){const x=J(S);Number.isFinite(x)&&x>=0||t.push(`Incomings ${a+1}: calibrationSellerboardMonthEndEur muss numerisch und >= 0 sein.`)}const N=u.calibrationPayoutRateToDatePct;if(N!=null&&String(N).trim()!==""){const x=J(N);(!Number.isFinite(x)||x<0)&&t.push(`Incomings ${a+1}: calibrationPayoutRateToDatePct muss numerisch und >= 0 sein.`)}}),(Array.isArray(e.extras)?e.extras:[]).forEach((l,a)=>{const u=l||{},p=u.month||(u.date?String(u.date).slice(0,7):"");U(p)||r.push(`Extras ${a+1}: Monat fehlt.`),J(u.amountEur)==null&&t.push(`Extras ${a+1}: Betrag ungueltig.`)}),(Array.isArray(e.fixcosts)?e.fixcosts:[]).forEach((l,a)=>{const u=l||{};String(u.name||"").trim()||t.push(`Fixkosten ${a+1}: Name fehlt.`),q(u.amount)>0||t.push(`Fixkosten ${a+1}: Betrag ungueltig.`),U(u.startMonth)&&U(u.endMonth)&&String(u.startMonth)>String(u.endMonth)&&t.push(`Fixkosten ${a+1}: Startmonat darf nicht nach Endmonat liegen.`)});const c=e.fixcostOverrides&&typeof e.fixcostOverrides=="object"?e.fixcostOverrides:{};return Object.entries(c).forEach(([l,a])=>{!a||typeof a!="object"||Object.entries(a).forEach(([u,p])=>{(p==null?void 0:p.amount)!=null&&J(p.amount)==null&&t.push(`Fixkosten-Override ${l}/${u}: Betrag ungueltig.`),(p==null?void 0:p.dueDate)!=null&&!/^\d{4}-\d{2}-\d{2}$/.test(String(p.dueDate))&&r.push(`Fixkosten-Override ${l}/${u}: dueDate sollte JJJJ-MM-TT sein.`)})}),{errors:t,warnings:r}}function gn(e){const t=e.settings||{},r=U(t.startMonth)?String(t.startMonth):"2025-01",n=Math.max(1,Number(t.horizonMonths||18)),i=[],[o,d]=r.split("-").map(Number);for(let m=0;m<n;m+=1){const y=o+Math.floor((d-1+m)/12),b=(d-1+m)%12+1;i.push(`${y}-${String(b).padStart(2,"0")}`)}const c=e.forecast||{},l=c.forecastManual||{},a=c.forecastImport||{},p=(Array.isArray(e.products)?e.products:[]).map(m=>m||{}).filter(m=>String(m.sku||"").trim()).map(m=>{const y=String(m.sku||"").trim(),b={},v=[];return i.forEach(S=>{var z,f,E;const N=((z=l==null?void 0:l[y])==null?void 0:z[S])??null,x=((E=(f=a==null?void 0:a[y])==null?void 0:f[S])==null?void 0:E.units)??null,I=N??x??null;b[S]=I==null?null:Number(I),N!=null&&v.push(S)}),{sku:y,alias:String(m.alias||""),categoryId:String(m.categoryId||""),avgSellingPriceGrossEUR:Number.isFinite(Number(m.avgSellingPriceGrossEUR))?Number(m.avgSellingPriceGrossEUR):null,sellerboardMarginPct:Number.isFinite(Number(m.sellerboardMarginPct))?Number(m.sellerboardMarginPct):null,values:b,meta:{manualOverridesMonths:v}}});return{generatedAt:new Date().toISOString(),sourcePriority:["manual","ventoryOne"],lastImportAt:c.lastImportAt||null,forecastLastImportedAt:c.lastImportAt||null,months:i,items:p}}function fn(e){const t=structuredClone(e);return t&&typeof t=="object"&&"_computed"in t&&delete t._computed,t.export={forecast:gn(t)},t}function Pe(e){const t=new Date().toISOString().replace(/[:.]/g,"-");return`${e}-${t}.json`}function Be(e,t){const r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=URL.createObjectURL(r),i=document.createElement("a");i.href=n,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n)}function hn(){const{state:e,loading:t,saving:r,error:n,saveWith:i}=yt(),[o,d]=vt.useMessage(),[c,l]=g.useState(""),a=g.useRef(null),u=e,p=g.useMemo(()=>fn(u),[e]),m=g.useMemo(()=>JSON.stringify(p,null,2),[p]),y=g.useMemo(()=>pn(u),[e]),b=Array.isArray(e.incomings)?e.incomings:[],v=Array.isArray(e.extras)?e.extras:[],S=e.settings||{},N=q(S.openingBalance),x=b.reduce((h,$)=>{const w=q($.revenueEur);let P=Number($.payoutPct||0);return Number.isFinite(P)||(P=0),P>1&&(P/=100),h+w*P},0),I=v.reduce((h,$)=>h+q($.amountEur),0),f=(St(u,{today:new Date})||[]).reduce((h,$)=>h+Number($.amount||0),0);async function E(h){l("");const $=await h.text();let w;try{w=JSON.parse($)}catch{o.error("Datei ist kein gueltiges JSON.");return}if(!w||typeof w!="object"||Array.isArray(w)){o.error("JSON muss ein Objekt enthalten.");return}const P=w;if(Number(P.schemaVersion)!==2){o.warning("Legacy JSON erkannt. Bitte im Tab 'Legacy Migration Wizard' importieren.");return}if(!window.confirm("Workspace durch diese JSON-Datei ersetzen?"))return;const Z=R(P),K=gt("v2:workspace-transfer:pre-import",R(e));try{await i(()=>Z,"v2:workspace-transfer:import");const W=`Import erfolgreich. Backup: ${K}`;l(W),o.success(W)}catch(W){const ee=W instanceof Error?W.message:"Unbekannter Fehler";o.error(`Import fehlgeschlagen: ${ee}`)}}return s.jsxs("div",{className:"v2-import-wizard",children:[d,s.jsxs(L,{children:[s.jsx(le,{level:4,children:"Workspace JSON Transfer"}),s.jsx(un,{children:"Export/Import fuer Workspace-JSON. Legacy-Dateien bitte ueber den Migration Wizard importieren."}),s.jsxs(H,{wrap:!0,children:[s.jsx(de,{type:"primary",onClick:()=>Be(p,Pe("amazon-fba-cashflow-v2-clean")),disabled:y.errors.length>0,children:"JSON herunterladen"}),s.jsx(de,{onClick:()=>Be(u,Pe("amazon-fba-cashflow-v2-backup")),children:"Backup JSON herunterladen"}),s.jsx(de,{onClick:()=>{var h;return(h=a.current)==null?void 0:h.click()},loading:r,children:"JSON importieren"}),s.jsx("input",{ref:a,type:"file",accept:".json,application/json",style:{display:"none"},onChange:h=>{var w;const $=(w=h.target.files)==null?void 0:w[0];$&&E($),h.target.value=""}}),s.jsx(ue,{color:"blue",children:"Namespace: Workspace Storage"})]}),c?s.jsx(D,{style:{marginTop:12},type:"success",showIcon:!0,message:c}):null,n?s.jsx(D,{style:{marginTop:12},type:"error",showIcon:!0,message:n}):null,t?s.jsx(D,{style:{marginTop:12},type:"info",showIcon:!0,message:"Workspace wird geladen..."}):null]}),s.jsxs(We,{gutter:[16,16],children:[s.jsx($e,{xs:24,lg:12,children:s.jsxs(L,{children:[s.jsx(le,{level:5,children:"Aktueller Stand"}),s.jsxs(H,{direction:"vertical",size:4,children:[s.jsxs(ne,{children:["Opening: ",s.jsxs("strong",{children:[ce(N)," EUR"]})]}),s.jsxs(ne,{children:["Sales x Payout: ",s.jsxs("strong",{children:[ce(x)," EUR"]})]}),s.jsxs(ne,{children:["Extras (Summe): ",s.jsxs("strong",{children:[ce(I)," EUR"]})]}),s.jsxs(ne,{children:["Fixkosten (Summe): ",s.jsxs("strong",{children:[ce(f)," EUR"]})]}),s.jsxs(ne,{children:["Zeitraum: ",s.jsxs("strong",{children:[String(S.startMonth||"-"),", ",String(S.horizonMonths||0)," Monate"]})]})]})]})}),s.jsx($e,{xs:24,lg:12,children:s.jsxs(L,{children:[s.jsx(le,{level:5,children:"Validierung"}),!y.errors.length&&!y.warnings.length?s.jsx(D,{type:"success",showIcon:!0,message:"Keine Probleme gefunden."}):s.jsxs(H,{direction:"vertical",style:{width:"100%"},children:[y.errors.length?s.jsx(D,{type:"error",showIcon:!0,message:`Fehler: ${y.errors.length}`,description:s.jsx("ul",{style:{margin:0,paddingLeft:16},children:y.errors.map(h=>s.jsx("li",{children:h},h))})}):null,y.warnings.length?s.jsx(D,{type:"warning",showIcon:!0,message:`Hinweise: ${y.warnings.length}`,description:s.jsx("ul",{style:{margin:0,paddingLeft:16},children:y.warnings.map(h=>s.jsx("li",{children:h},h))})}):null]})]})})]}),s.jsxs(L,{children:[s.jsx(le,{level:5,children:"JSON Vorschau"}),s.jsx("pre",{style:{margin:0,maxHeight:460,overflow:"auto",background:"#fff",border:"1px solid rgba(15, 27, 45, 0.12)",borderRadius:10,padding:12},children:m})]})]})}const{Paragraph:yn,Title:xn}=Ee;function An(){return s.jsxs("div",{className:"v2-page",children:[s.jsx(L,{className:"v2-intro-card",children:s.jsx("div",{className:"v2-page-head",children:s.jsxs("div",{children:[s.jsx(xn,{level:3,children:"Export / Import"}),s.jsx(yn,{children:"Neuer Migrationswizard fuer Legacy JSON mit Dry-Run/Apply sowie Workspace JSON Transfer (Export, Backup, Import, Vorschau, Validierung)."})]})})}),s.jsx(xt,{defaultActiveKey:"wizard",items:[{key:"transfer",label:"Workspace JSON Transfer",children:s.jsx(hn,{})},{key:"wizard",label:"Legacy Migration Wizard",children:s.jsx(dn,{})}]})]})}export{An as default};
