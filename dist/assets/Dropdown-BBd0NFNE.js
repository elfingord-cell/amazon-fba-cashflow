import{t as b,aL as te,ar as L,c7 as W,cp as D,aE as a,bN as _,as as ae,at as ne,a3 as S,aH as re,av as oe,au as ie}from"./index-BAXFY6Sx.js";var le=L.ESC,se=L.TAB;function ue(e){var c=e.visible,r=e.triggerRef,s=e.onVisibleChange,f=e.autoFocus,o=e.overlayRef,n=b.useRef(!1),u=function(){if(c){var t,i;(t=r.current)===null||t===void 0||(i=t.focus)===null||i===void 0||i.call(t),s==null||s(!1)}},p=function(){var t;return(t=o.current)!==null&&t!==void 0&&t.focus?(o.current.focus(),n.current=!0,!0):!1},h=function(t){switch(t.keyCode){case le:u();break;case se:{var i=!1;n.current||(i=p()),i?t.preventDefault():u();break}}};b.useEffect(function(){return c?(window.addEventListener("keydown",h),f&&te(p,3),function(){window.removeEventListener("keydown",h),n.current=!1}):function(){n.current=!1}},[c])}var ce=b.forwardRef(function(e,c){var r=e.overlay,s=e.arrow,f=e.prefixCls,o=b.useMemo(function(){var u;return typeof r=="function"?u=r():u=r,u},[r]),n=W(c,D(o));return a.createElement(a.Fragment,null,s&&a.createElement("div",{className:"".concat(f,"-arrow")}),a.cloneElement(o,{ref:_(o)?n:void 0}))}),v={adjustX:1,adjustY:1},d=[0,0],fe={topLeft:{points:["bl","tl"],overflow:v,offset:[0,-4],targetOffset:d},top:{points:["bc","tc"],overflow:v,offset:[0,-4],targetOffset:d},topRight:{points:["br","tr"],overflow:v,offset:[0,-4],targetOffset:d},bottomLeft:{points:["tl","bl"],overflow:v,offset:[0,4],targetOffset:d},bottom:{points:["tc","bc"],overflow:v,offset:[0,4],targetOffset:d},bottomRight:{points:["tr","br"],overflow:v,offset:[0,4],targetOffset:d}},ve=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function de(e,c){var r,s=e.arrow,f=s===void 0?!1:s,o=e.prefixCls,n=o===void 0?"rc-dropdown":o,u=e.transitionName,p=e.animation,h=e.align,g=e.placement,t=g===void 0?"bottomLeft":g,i=e.placements,j=i===void 0?fe:i,$=e.getPopupContainer,H=e.showAction,K=e.hideAction,B=e.overlayClassName,I=e.overlayStyle,X=e.visible,N=e.trigger,A=N===void 0?["hover"]:N,Y=e.autoFocus,E=e.overlay,y=e.children,w=e.onVisibleChange,q=ae(e,ve),z=a.useState(),M=ne(z,2),G=M[0],x=M[1],R="visible"in e?X:G,P=a.useRef(null),V=a.useRef(null),k=a.useRef(null);a.useImperativeHandle(c,function(){return P.current});var T=function(l){x(l),w==null||w(l)};ue({visible:R,triggerRef:k,onVisibleChange:T,autoFocus:Y,overlayRef:V});var J=function(l){var C=e.onOverlayClick;x(!1),C&&C(l)},F=function(){return a.createElement(ce,{ref:V,overlay:E,prefixCls:n,arrow:f})},Q=function(){return typeof E=="function"?F:F()},U=function(){var l=e.minOverlayWidthMatchTrigger,C=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?l:!C},Z=function(){var l=e.openClassName;return l!==void 0?l:"".concat(n,"-open")},ee=a.cloneElement(y,{className:S((r=y.props)===null||r===void 0?void 0:r.className,R&&Z()),ref:_(y)?W(k,D(y)):void 0}),O=K;return!O&&A.indexOf("contextMenu")!==-1&&(O=["click"]),a.createElement(re,oe({builtinPlacements:j},q,{prefixCls:n,ref:P,popupClassName:S(B,ie({},"".concat(n,"-show-arrow"),f)),popupStyle:I,action:A,showAction:H,hideAction:O,popupPlacement:t,popupAlign:h,popupTransitionName:u,popupAnimation:p,popupVisible:R,stretch:U()?"minWidth":"",popup:Q(),onPopupVisibleChange:T,onPopupClick:J,getPopupContainer:$}),ee)}const me=a.forwardRef(de);export{me as D};
